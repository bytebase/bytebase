- schema: |-
    create table t
      (
        `a` int NOT NULL COMMENT 'this is comment',
        `b` VARCHAR(20) NOT NULL,
        `c` int NOT NULL,
        `d` text NULL,
        `t_not_null` text NOT NULL,
        `e` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
        `g` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
        PRIMARY KEY (`a`),
        UNIQUE KEY `t_c_uniq_idx` (`c` DESC),
        UNIQUE KEY `t_c_plus_5_uniq_idx` (((`c` + 5)) DESC),
        UNIQUE KEY `t_c_plus_5_t_c_plus_3_uniq_idx` (((`c` + 5)) DESC,((`c` + 3))),
        KEY `idx_c` (`c`),
        KEY `idx_d` (`d`(10)),
        KEY `idx_e` (`e`(10)),
        FULLTEXT KEY `t_d_fulltext_idx` (`d`)
      ) ENGINE=InnoDB COLLATE=utf8mb4_0900_ai_ci COMMENT 'this is comment with '' escaped';
  metadata: |-
    {
      "schemas": [
        {
          "tables": [
            {
              "name": "t",
              "columns": [
                {
                  "name": "a",
                  "position": 1,
                  "type": "int",
                  "comment": "this is comment"
                },
                {
                  "name": "b",
                  "position": 2,
                  "type": "VARCHAR(20)"
                },
                {
                  "name": "c",
                  "position": 3,
                  "type": "int"
                },
                {
                  "name": "d",
                  "position": 4,
                  "defaultNull": true,
                  "nullable": true,
                  "type": "text"
                },
                {
                  "name": "t_not_null",
                  "position": 5,
                  "type": "text"
                },
                {
                  "name": "e",
                  "position": 6,
                  "type": "varchar(20)"
                },
                {
                  "name": "g",
                  "position": 7,
                  "defaultExpression": "CURRENT_TIMESTAMP",
                  "onUpdate": "CURRENT_TIMESTAMP",
                  "type": "TIMESTAMP"
                }
              ],
              "indexes": [
                {
                  "name": "PRIMARY",
                  "expressions": [
                    "a"
                  ],
                  "keyLength": [
                    "-1"
                  ],
                  "unique": true,
                  "primary": true,
                  "visible": true
                },
                {
                  "name": "t_c_uniq_idx",
                  "expressions": [
                    "c"
                  ],
                  "keyLength": [
                    "-1"
                  ],
                  "type": "BTREE",
                  "unique": true,
                  "visible": true
                },
                {
                  "name": "t_c_plus_5_uniq_idx",
                  "expressions": [
                    "((`c` + 5))"
                  ],
                  "keyLength": [
                    "-1"
                  ],
                  "type": "BTREE",
                  "unique": true,
                  "visible": true
                },
                {
                  "name": "t_c_plus_5_t_c_plus_3_uniq_idx",
                  "expressions": [
                    "((`c` + 5))",
                    "((`c` + 3))"
                  ],
                  "keyLength": [
                    "-1",
                    "-1"
                  ],
                  "type": "BTREE",
                  "unique": true,
                  "visible": true
                },
                {
                  "name": "idx_c",
                  "expressions": [
                    "c"
                  ],
                  "keyLength": [
                    "-1"
                  ],
                  "type": "BTREE",
                  "visible": true
                },
                {
                  "name": "idx_d",
                  "expressions": [
                    "d"
                  ],
                  "keyLength": [
                    "10"
                  ],
                  "type": "BTREE",
                  "visible": true
                },
                {
                  "name": "idx_e",
                  "expressions": [
                    "e"
                  ],
                  "keyLength": [
                    "10"
                  ],
                  "type": "BTREE",
                  "visible": true
                },
                {
                  "name": "t_d_fulltext_idx",
                  "expressions": [
                    "d"
                  ],
                  "keyLength": [
                    "-1"
                  ],
                  "type": "FULLTEXT",
                  "visible": true
                }
              ],
              "engine": "InnoDB",
              "collation": "utf8mb4_0900_ai_ci",
              "comment": "this is comment with ' escaped"
            }
          ]
        }
      ]
    }
- schema: |
    create table t
      (
        c int auto_increment,
        a int default 1 comment 'abcdefg',
        b varchar(20) default NULL comment '',
        primary key (a, b),
        constraint fk1 foreign key (a) references t2 (b)
      ) COMMENT 'this is comment with '' escaped';
    create table t2(b int NOT NULL default NULL, primary key (b));
  metadata: |-
    {
      "schemas": [
        {
          "tables": [
            {
              "name": "t",
              "columns": [
                {
                  "name": "c",
                  "position": 1,
                  "defaultExpression": "AUTO_INCREMENT",
                  "nullable": true,
                  "type": "int"
                },
                {
                  "name": "a",
                  "position": 2,
                  "defaultExpression": "1",
                  "nullable": true,
                  "type": "int",
                  "comment": "abcdefg"
                },
                {
                  "name": "b",
                  "position": 3,
                  "defaultNull": true,
                  "nullable": true,
                  "type": "varchar(20)"
                }
              ],
              "indexes": [
                {
                  "name": "PRIMARY",
                  "expressions": [
                    "a",
                    "b"
                  ],
                  "keyLength": [
                    "-1",
                    "-1"
                  ],
                  "unique": true,
                  "primary": true,
                  "visible": true
                }
              ],
              "comment": "this is comment with ' escaped",
              "foreignKeys": [
                {
                  "name": "fk1",
                  "columns": [
                    "a"
                  ],
                  "referencedTable": "t2",
                  "referencedColumns": [
                    "b"
                  ]
                }
              ]
            },
            {
              "name": "t2",
              "columns": [
                {
                  "name": "b",
                  "position": 1,
                  "defaultNull": true,
                  "type": "int"
                }
              ],
              "indexes": [
                {
                  "name": "PRIMARY",
                  "expressions": [
                    "b"
                  ],
                  "keyLength": [
                    "-1"
                  ],
                  "unique": true,
                  "primary": true,
                  "visible": true
                }
              ]
            }
          ]
        }
      ]
    }
- schema: |-
    CREATE TABLE `range_partition` (
      `id` INT,
      `name` VARCHAR(45) NOT NULL,
      PRIMARY KEY (`id`, `name`)
    )
    PARTITION BY RANGE COLUMNS(id, name)
    SUBPARTITION BY HASH(id) (
      PARTITION p0 VALUES LESS THAN (10, 'a') (
        SUBPARTITION p0s0,
        SUBPARTITION p0s1
      ),
      PARTITION p1 VALUES LESS THAN (20, 'b') (
        SUBPARTITION p1s0,
        SUBPARTITION p1s1
      ),
      PARTITION p2 VALUES LESS THAN (MAXVALUE, MAXVALUE) (
        SUBPARTITION p2s0,
        SUBPARTITION p2s1
      )
    );
  metadata: |-
    {
      "schemas": [
        {
          "tables": [
            {
              "name": "range_partition",
              "columns": [
                {
                  "name": "id",
                  "position": 1,
                  "defaultNull": true,
                  "nullable": true,
                  "type": "INT"
                },
                {
                  "name": "name",
                  "position": 2,
                  "type": "VARCHAR(45)"
                }
              ],
              "indexes": [
                {
                  "name": "PRIMARY",
                  "expressions": [
                    "id",
                    "name"
                  ],
                  "keyLength": [
                    "-1",
                    "-1"
                  ],
                  "unique": true,
                  "primary": true,
                  "visible": true
                }
              ],
              "partitions": [
                {
                  "name": "p0",
                  "type": "RANGE_COLUMNS",
                  "expression": "`id`,`name`",
                  "value": "10,'a'",
                  "subpartitions": [
                    {
                      "name": "p0s0",
                      "type": "HASH",
                      "expression": "`id`"
                    },
                    {
                      "name": "p0s1",
                      "type": "HASH",
                      "expression": "`id`"
                    }
                  ]
                },
                {
                  "name": "p1",
                  "type": "RANGE_COLUMNS",
                  "expression": "`id`,`name`",
                  "value": "20,'b'",
                  "subpartitions": [
                    {
                      "name": "p1s0",
                      "type": "HASH",
                      "expression": "`id`"
                    },
                    {
                      "name": "p1s1",
                      "type": "HASH",
                      "expression": "`id`"
                    }
                  ]
                },
                {
                  "name": "p2",
                  "type": "RANGE_COLUMNS",
                  "expression": "`id`,`name`",
                  "value": "MAXVALUE,MAXVALUE",
                  "subpartitions": [
                    {
                      "name": "p2s0",
                      "type": "HASH",
                      "expression": "`id`"
                    },
                    {
                      "name": "p2s1",
                      "type": "HASH",
                      "expression": "`id`"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
- schema: |-
    CREATE TABLE `list_partition` (
      `id` INT,
      `name` VARCHAR(45) NOT NULL
    )
    PARTITION BY LIST COLUMNS(id, name)
    SUBPARTITION BY KEY(id)
    SUBPARTITIONS 2
    (
      PARTITION p0 VALUES IN (1, 'a'),
      PARTITION p1 VALUES IN (2, 'b'),
      PARTITION p2 VALUES IN (3, 'c')
    );
  metadata: |-
    {
      "schemas": [
        {
          "tables": [
            {
              "name": "list_partition",
              "columns": [
                {
                  "name": "id",
                  "position": 1,
                  "defaultNull": true,
                  "nullable": true,
                  "type": "INT"
                },
                {
                  "name": "name",
                  "position": 2,
                  "type": "VARCHAR(45)"
                }
              ],
              "partitions": [
                {
                  "name": "p0",
                  "type": "LIST_COLUMNS",
                  "expression": "`id`,`name`",
                  "value": "(1,'a')",
                  "subpartitions": [
                    {
                      "name": "p0sp0",
                      "type": "KEY",
                      "expression": "`id`",
                      "useDefault": "2"
                    },
                    {
                      "name": "p0sp1",
                      "type": "KEY",
                      "expression": "`id`",
                      "useDefault": "2"
                    }
                  ]
                },
                {
                  "name": "p1",
                  "type": "LIST_COLUMNS",
                  "expression": "`id`,`name`",
                  "value": "(2,'b')",
                  "subpartitions": [
                    {
                      "name": "p1sp0",
                      "type": "KEY",
                      "expression": "`id`",
                      "useDefault": "2"
                    },
                    {
                      "name": "p1sp1",
                      "type": "KEY",
                      "expression": "`id`",
                      "useDefault": "2"
                    }
                  ]
                },
                {
                  "name": "p2",
                  "type": "LIST_COLUMNS",
                  "expression": "`id`,`name`",
                  "value": "(3,'c')",
                  "subpartitions": [
                    {
                      "name": "p2sp0",
                      "type": "KEY",
                      "expression": "`id`",
                      "useDefault": "2"
                    },
                    {
                      "name": "p2sp1",
                      "type": "KEY",
                      "expression": "`id`",
                      "useDefault": "2"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
