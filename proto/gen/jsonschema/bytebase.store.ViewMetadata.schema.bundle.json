{
  "$defs": {
    "bytebase.store.ColumnMetadata.schema.json": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "additionalProperties": false,
      "description": "ColumnMetadata is the metadata for columns.",
      "patternProperties": {
        "^(characterSet)$": {
          "default": "",
          "description": "The character_set is the character_set of a column.",
          "type": "string"
        },
        "^(defaultConstraintName)$": {
          "default": "",
          "description": "Example: A column definition like:\n   CREATE TABLE employees (\n     status NVARCHAR(20) DEFAULT 'active'\n   )\n\n Will create a constraint with an auto-generated name like 'DF__employees__statu__3B75D760'\n or a user-defined name if specified:\n   ALTER TABLE employees ADD CONSTRAINT DF_employees_status DEFAULT 'active' FOR status\n\n To modify the default, you must first drop the existing constraint by name:\n   ALTER TABLE employees DROP CONSTRAINT DF__employees__statu__3B75D760\n   ALTER TABLE employees ADD CONSTRAINT DF_employees_status DEFAULT 'inactive' FOR status\n\n This field is populated when syncing from the database. When empty (e.g., when parsing\n from SQL files), the system cannot automatically drop the constraint.",
          "title": "The default_constraint_name is the name of the default constraint, MSSQL only.\n In MSSQL, default values are implemented as named constraints. When modifying or\n dropping a column's default value, you must reference the constraint by name.\n This field stores the actual constraint name from the database.",
          "type": "string"
        },
        "^(defaultOnNull)$": {
          "default": false,
          "description": "Oracle specific metadata.\n The default_on_null is the default on null of a column.",
          "type": "boolean"
        },
        "^(identityGeneration)$": {
          "anyOf": [
            {
              "pattern": "^IDENTITY_GENERATION_UNSPECIFIED$",
              "type": "string"
            },
            {
              "enum": [
                "ALWAYS",
                "BY_DEFAULT"
              ],
              "type": "string"
            },
            {
              "maximum": 2147483647,
              "minimum": -2147483648,
              "type": "integer"
            }
          ],
          "default": 0,
          "description": "The identity_generation is for identity columns, PG only.",
          "title": "Identity Generation"
        },
        "^(identityIncrement)$": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "pattern": "^-?[0-9]+$",
              "type": "string"
            }
          ],
          "default": 0,
          "description": "The identity_increment is for identity columns, MSSQL only."
        },
        "^(identitySeed)$": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "pattern": "^-?[0-9]+$",
              "type": "string"
            }
          ],
          "default": 0,
          "description": "The identity_seed is for identity columns, MSSQL only."
        },
        "^(isIdentity)$": {
          "default": false,
          "type": "boolean"
        },
        "^(onUpdate)$": {
          "default": "",
          "description": "The on_update is the on update action of a column.\n For MySQL like databases, it's only supported for TIMESTAMP columns with\n CURRENT_TIMESTAMP as on update value.",
          "type": "string"
        }
      },
      "properties": {
        "character_set": {
          "default": "",
          "description": "The character_set is the character_set of a column.",
          "type": "string"
        },
        "collation": {
          "default": "",
          "description": "The collation is the collation of a column.",
          "type": "string"
        },
        "comment": {
          "default": "",
          "description": "The comment is the comment of a column.",
          "type": "string"
        },
        "default": {
          "default": "",
          "description": "The default value of the column.",
          "type": "string"
        },
        "default_constraint_name": {
          "default": "",
          "description": "Example: A column definition like:\n   CREATE TABLE employees (\n     status NVARCHAR(20) DEFAULT 'active'\n   )\n\n Will create a constraint with an auto-generated name like 'DF__employees__statu__3B75D760'\n or a user-defined name if specified:\n   ALTER TABLE employees ADD CONSTRAINT DF_employees_status DEFAULT 'active' FOR status\n\n To modify the default, you must first drop the existing constraint by name:\n   ALTER TABLE employees DROP CONSTRAINT DF__employees__statu__3B75D760\n   ALTER TABLE employees ADD CONSTRAINT DF_employees_status DEFAULT 'inactive' FOR status\n\n This field is populated when syncing from the database. When empty (e.g., when parsing\n from SQL files), the system cannot automatically drop the constraint.",
          "title": "The default_constraint_name is the name of the default constraint, MSSQL only.\n In MSSQL, default values are implemented as named constraints. When modifying or\n dropping a column's default value, you must reference the constraint by name.\n This field stores the actual constraint name from the database.",
          "type": "string"
        },
        "default_on_null": {
          "default": false,
          "description": "Oracle specific metadata.\n The default_on_null is the default on null of a column.",
          "type": "boolean"
        },
        "generation": {
          "$ref": "#/$defs/bytebase.store.GenerationMetadata.schema.json",
          "description": "The generation is for generated columns."
        },
        "identity_generation": {
          "anyOf": [
            {
              "pattern": "^IDENTITY_GENERATION_UNSPECIFIED$",
              "type": "string"
            },
            {
              "enum": [
                "ALWAYS",
                "BY_DEFAULT"
              ],
              "type": "string"
            },
            {
              "maximum": 2147483647,
              "minimum": -2147483648,
              "type": "integer"
            }
          ],
          "default": 0,
          "description": "The identity_generation is for identity columns, PG only.",
          "title": "Identity Generation"
        },
        "identity_increment": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "pattern": "^-?[0-9]+$",
              "type": "string"
            }
          ],
          "default": 0,
          "description": "The identity_increment is for identity columns, MSSQL only."
        },
        "identity_seed": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "pattern": "^-?[0-9]+$",
              "type": "string"
            }
          ],
          "default": 0,
          "description": "The identity_seed is for identity columns, MSSQL only."
        },
        "is_identity": {
          "default": false,
          "type": "boolean"
        },
        "name": {
          "default": "",
          "description": "The name of the column.",
          "type": "string"
        },
        "nullable": {
          "default": false,
          "description": "The nullable is the nullable of a column.",
          "type": "boolean"
        },
        "on_update": {
          "default": "",
          "description": "The on_update is the on update action of a column.\n For MySQL like databases, it's only supported for TIMESTAMP columns with\n CURRENT_TIMESTAMP as on update value.",
          "type": "string"
        },
        "position": {
          "anyOf": [
            {
              "maximum": 2147483647,
              "minimum": -2147483648,
              "type": "integer"
            },
            {
              "pattern": "^-?[0-9]+$",
              "type": "string"
            }
          ],
          "default": 0,
          "description": "The position is the position in columns."
        },
        "type": {
          "default": "",
          "description": "The type is the type of a column.",
          "type": "string"
        }
      },
      "title": "Column Metadata",
      "type": "object"
    },
    "bytebase.store.DependencyColumn.schema.json": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "additionalProperties": false,
      "description": "DependencyColumn is the metadata for dependency columns.",
      "properties": {
        "column": {
          "default": "",
          "description": "The column is the name of a reference column.",
          "type": "string"
        },
        "schema": {
          "default": "",
          "description": "The schema is the schema of a reference column.",
          "type": "string"
        },
        "table": {
          "default": "",
          "description": "The table is the table of a reference column.",
          "type": "string"
        }
      },
      "title": "Dependency Column",
      "type": "object"
    },
    "bytebase.store.GenerationMetadata.schema.json": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "additionalProperties": false,
      "properties": {
        "expression": {
          "default": "",
          "type": "string"
        },
        "type": {
          "anyOf": [
            {
              "pattern": "^TYPE_UNSPECIFIED$",
              "type": "string"
            },
            {
              "enum": [
                "TYPE_VIRTUAL",
                "TYPE_STORED"
              ],
              "type": "string"
            },
            {
              "maximum": 2147483647,
              "minimum": -2147483648,
              "type": "integer"
            }
          ],
          "default": 0,
          "title": "Type"
        }
      },
      "title": "Generation Metadata",
      "type": "object"
    },
    "bytebase.store.RuleMetadata.schema.json": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "additionalProperties": false,
      "description": "RuleMetadata is the metadata for PostgreSQL rules.",
      "patternProperties": {
        "^(isEnabled)$": {
          "default": false,
          "description": "The is_enabled indicates whether the rule is enabled.",
          "type": "boolean"
        },
        "^(isInstead)$": {
          "default": false,
          "description": "The is_instead indicates whether this is an INSTEAD rule.",
          "type": "boolean"
        }
      },
      "properties": {
        "action": {
          "default": "",
          "description": "The command(s) to execute when the rule fires.",
          "type": "string"
        },
        "condition": {
          "default": "",
          "description": "The WHERE condition of the rule (optional).",
          "type": "string"
        },
        "definition": {
          "default": "",
          "description": "The full CREATE RULE statement.",
          "type": "string"
        },
        "event": {
          "default": "",
          "description": "The event type of the rule: SELECT, INSERT, UPDATE, or DELETE.",
          "type": "string"
        },
        "is_enabled": {
          "default": false,
          "description": "The is_enabled indicates whether the rule is enabled.",
          "type": "boolean"
        },
        "is_instead": {
          "default": false,
          "description": "The is_instead indicates whether this is an INSTEAD rule.",
          "type": "boolean"
        },
        "name": {
          "default": "",
          "description": "The name of the rule.",
          "type": "string"
        }
      },
      "title": "Rule Metadata",
      "type": "object"
    },
    "bytebase.store.TriggerMetadata.schema.json": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "additionalProperties": false,
      "patternProperties": {
        "^(characterSetClient)$": {
          "default": "",
          "type": "string"
        },
        "^(collationConnection)$": {
          "default": "",
          "type": "string"
        },
        "^(skipDump)$": {
          "default": false,
          "type": "boolean"
        },
        "^(sqlMode)$": {
          "default": "",
          "type": "string"
        }
      },
      "properties": {
        "body": {
          "default": "",
          "description": "The body of the trigger.",
          "type": "string"
        },
        "character_set_client": {
          "default": "",
          "type": "string"
        },
        "collation_connection": {
          "default": "",
          "type": "string"
        },
        "comment": {
          "default": "",
          "type": "string"
        },
        "event": {
          "default": "",
          "description": "The event that triggers this action, such as INSERT, UPDATE, DELETE, or TRUNCATE.",
          "type": "string"
        },
        "name": {
          "default": "",
          "description": "The name of the trigger.",
          "type": "string"
        },
        "skip_dump": {
          "default": false,
          "type": "boolean"
        },
        "sql_mode": {
          "default": "",
          "type": "string"
        },
        "timing": {
          "default": "",
          "description": "The timing of when the trigger fires, such as BEFORE or AFTER.",
          "type": "string"
        }
      },
      "title": "Trigger Metadata",
      "type": "object"
    },
    "bytebase.store.ViewMetadata.schema.json": {
      "$schema": "https://json-schema.org/draft/2020-12/schema",
      "additionalProperties": false,
      "description": "ViewMetadata is the metadata for views.",
      "patternProperties": {
        "^(dependencyColumns)$": {
          "description": "The list of dependency columns of a view.",
          "items": {
            "$ref": "#/$defs/bytebase.store.DependencyColumn.schema.json"
          },
          "type": "array"
        },
        "^(skipDump)$": {
          "default": false,
          "type": "boolean"
        }
      },
      "properties": {
        "columns": {
          "description": "The ordered list of columns in the view.",
          "items": {
            "$ref": "#/$defs/bytebase.store.ColumnMetadata.schema.json"
          },
          "type": "array"
        },
        "comment": {
          "default": "",
          "description": "The comment is the comment of a view.",
          "type": "string"
        },
        "definition": {
          "default": "",
          "description": "The definition is the definition of a view.",
          "type": "string"
        },
        "dependency_columns": {
          "description": "The list of dependency columns of a view.",
          "items": {
            "$ref": "#/$defs/bytebase.store.DependencyColumn.schema.json"
          },
          "type": "array"
        },
        "name": {
          "default": "",
          "description": "The name of the view.",
          "type": "string"
        },
        "rules": {
          "description": "The rules is the list of rules in a view (PostgreSQL specific).",
          "items": {
            "$ref": "#/$defs/bytebase.store.RuleMetadata.schema.json"
          },
          "type": "array"
        },
        "skip_dump": {
          "default": false,
          "type": "boolean"
        },
        "triggers": {
          "description": "The list of triggers in the view.",
          "items": {
            "$ref": "#/$defs/bytebase.store.TriggerMetadata.schema.json"
          },
          "type": "array"
        }
      },
      "title": "View Metadata",
      "type": "object"
    }
  },
  "$id": "bytebase.store.ViewMetadata.schema.bundle.json",
  "$ref": "#/$defs/bytebase.store.ViewMetadata.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema"
}
