{
  "$id": "bytebase.store.Task.schema.strict.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "description": "Task is the metadata for database operation tasks.",
  "properties": {
    "character_set": {
      "description": "Character set for the new database.",
      "type": "string"
    },
    "collation": {
      "description": "Collation for the new database.",
      "type": "string"
    },
    "database_name": {
      "description": "Name of the database to create.",
      "type": "string"
    },
    "enable_ghost": {
      "description": "Whether to use gh-ost for online schema migration.",
      "type": "boolean"
    },
    "enable_prior_backup": {
      "description": "Whether to create an automatic backup before applying changes.",
      "type": "boolean"
    },
    "environment_id": {
      "description": "The environment where the database will be created.",
      "type": "string"
    },
    "flags": {
      "additionalProperties": {
        "type": "string"
      },
      "description": "Configuration flags for gh-ost migration tool.",
      "propertyNames": {
        "type": "string"
      },
      "type": "object"
    },
    "format": {
      "description": "Format of the exported data (SQL, CSV, JSON, etc).",
      "enum": [
        "FORMAT_UNSPECIFIED",
        "CSV",
        "JSON",
        "SQL",
        "XLSX"
      ],
      "title": "Export Format",
      "type": "string"
    },
    "password": {
      "description": "Password to encrypt the exported data archive.",
      "type": "string"
    },
    "schema_version": {
      "description": "Schema version after migration is applied.",
      "type": "string"
    },
    "sheet_id": {
      "description": "The sheet ID containing SQL statements for this task.",
      "maximum": 2147483647,
      "minimum": -2147483648,
      "type": "integer"
    },
    "skipped": {
      "description": "Whether the task was skipped during execution.",
      "type": "boolean"
    },
    "skipped_reason": {
      "description": "Reason why the task was skipped.",
      "type": "string"
    },
    "spec_id": {
      "description": "UUID that identifies the spec this task implements.",
      "type": "string"
    },
    "table_name": {
      "description": "Optional table name to create (required for some databases like MongoDB).",
      "type": "string"
    },
    "task_release_source": {
      "$ref": "bytebase.store.TaskReleaseSource.schema.strict.json",
      "description": "Source information if task is created from a release."
    }
  },
  "required": [
    "skipped",
    "skipped_reason",
    "spec_id",
    "sheet_id",
    "environment_id",
    "database_name",
    "table_name",
    "character_set",
    "collation",
    "schema_version",
    "enable_prior_backup",
    "enable_ghost",
    "password",
    "format"
  ],
  "title": "Task",
  "type": "object"
}
