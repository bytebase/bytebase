{
  "$id": "bytebase.store.Task.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "description": "Task is the metadata for database operation tasks.",
  "patternProperties": {
    "^(characterSet)$": {
      "default": "",
      "description": "Character set for the new database.",
      "type": "string"
    },
    "^(databaseName)$": {
      "default": "",
      "description": "Name of the database to create.",
      "type": "string"
    },
    "^(enableGhost)$": {
      "default": false,
      "description": "Whether to use gh-ost for online schema migration.",
      "type": "boolean"
    },
    "^(enablePriorBackup)$": {
      "default": false,
      "description": "Whether to create an automatic backup before applying changes.",
      "type": "boolean"
    },
    "^(environmentId)$": {
      "default": "",
      "description": "The environment where the database will be created.",
      "type": "string"
    },
    "^(schemaVersion)$": {
      "default": "",
      "description": "Schema version after migration is applied.",
      "type": "string"
    },
    "^(sheetId)$": {
      "anyOf": [
        {
          "maximum": 2147483647,
          "minimum": -2147483648,
          "type": "integer"
        },
        {
          "pattern": "^-?[0-9]+$",
          "type": "string"
        }
      ],
      "default": 0,
      "description": "The sheet ID containing SQL statements for this task."
    },
    "^(skippedReason)$": {
      "default": "",
      "description": "Reason why the task was skipped.",
      "type": "string"
    },
    "^(specId)$": {
      "default": "",
      "description": "UUID that identifies the spec this task implements.",
      "type": "string"
    },
    "^(tableName)$": {
      "default": "",
      "description": "Optional table name to create (required for some databases like MongoDB).",
      "type": "string"
    },
    "^(taskReleaseSource)$": {
      "$ref": "bytebase.store.TaskReleaseSource.schema.json",
      "description": "Source information if task is created from a release."
    }
  },
  "properties": {
    "character_set": {
      "default": "",
      "description": "Character set for the new database.",
      "type": "string"
    },
    "collation": {
      "default": "",
      "description": "Collation for the new database.",
      "type": "string"
    },
    "database_name": {
      "default": "",
      "description": "Name of the database to create.",
      "type": "string"
    },
    "enable_ghost": {
      "default": false,
      "description": "Whether to use gh-ost for online schema migration.",
      "type": "boolean"
    },
    "enable_prior_backup": {
      "default": false,
      "description": "Whether to create an automatic backup before applying changes.",
      "type": "boolean"
    },
    "environment_id": {
      "default": "",
      "description": "The environment where the database will be created.",
      "type": "string"
    },
    "flags": {
      "additionalProperties": {
        "type": "string"
      },
      "description": "Configuration flags for gh-ost migration tool.",
      "propertyNames": {
        "type": "string"
      },
      "type": "object"
    },
    "format": {
      "anyOf": [
        {
          "pattern": "^FORMAT_UNSPECIFIED$",
          "type": "string"
        },
        {
          "enum": [
            "CSV",
            "JSON",
            "SQL",
            "XLSX"
          ],
          "type": "string"
        },
        {
          "maximum": 2147483647,
          "minimum": -2147483648,
          "type": "integer"
        }
      ],
      "default": 0,
      "description": "Format of the exported data (SQL, CSV, JSON, etc).",
      "title": "Export Format"
    },
    "password": {
      "default": "",
      "description": "Password to encrypt the exported data archive.",
      "type": "string"
    },
    "schema_version": {
      "default": "",
      "description": "Schema version after migration is applied.",
      "type": "string"
    },
    "sheet_id": {
      "anyOf": [
        {
          "maximum": 2147483647,
          "minimum": -2147483648,
          "type": "integer"
        },
        {
          "pattern": "^-?[0-9]+$",
          "type": "string"
        }
      ],
      "default": 0,
      "description": "The sheet ID containing SQL statements for this task."
    },
    "skipped": {
      "default": false,
      "description": "Whether the task was skipped during execution.",
      "type": "boolean"
    },
    "skipped_reason": {
      "default": "",
      "description": "Reason why the task was skipped.",
      "type": "string"
    },
    "spec_id": {
      "default": "",
      "description": "UUID that identifies the spec this task implements.",
      "type": "string"
    },
    "table_name": {
      "default": "",
      "description": "Optional table name to create (required for some databases like MongoDB).",
      "type": "string"
    },
    "task_release_source": {
      "$ref": "bytebase.store.TaskReleaseSource.schema.json",
      "description": "Source information if task is created from a release."
    }
  },
  "title": "Task",
  "type": "object"
}
