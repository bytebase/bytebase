{
  "$id": "bytebase.v1.Webhook.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "patternProperties": {
    "^(directMessage)$": {
      "default": false,
      "description": "if direct_message is set, the notification is sent directly\n to the persons and url will be ignored.\n IM integration setting should be set for this function to work.",
      "type": "boolean"
    },
    "^(notificationTypes)$": {
      "description": "notification_types is the list of activities types that the webhook is interested in.\n Bytebase will only send notifications to the webhook if the activity type is in the list.\n It should not be empty, and should be a subset of the following:\n - ISSUE_CREATE\n - ISSUE_COMMENT_CREATE\n - ISSUE_FIELD_UPDATE\n - ISSUE_STATUS_UPDATE\n - ISSUE_APPROVAL_NOTIFY\n - ISSUE_PIPELINE_STAGE_STATUS_UPDATE\n - ISSUE_PIPELINE_TASK_RUN_STATUS_UPDATE\n - NOTIFY_ISSUE_APPROVED\n - NOTIFY_PIPELINE_ROLLOUT",
      "items": {
        "anyOf": [
          {
            "enum": [
              "TYPE_UNSPECIFIED",
              "NOTIFY_ISSUE_APPROVED",
              "NOTIFY_PIPELINE_ROLLOUT",
              "ISSUE_CREATE",
              "ISSUE_COMMENT_CREATE",
              "ISSUE_FIELD_UPDATE",
              "ISSUE_STATUS_UPDATE",
              "ISSUE_APPROVAL_NOTIFY",
              "ISSUE_PIPELINE_STAGE_STATUS_UPDATE",
              "ISSUE_PIPELINE_TASK_RUN_STATUS_UPDATE"
            ],
            "type": "string"
          },
          {
            "maximum": 2147483647,
            "minimum": -2147483648,
            "type": "integer"
          }
        ],
        "title": "Type"
      },
      "type": "array"
    }
  },
  "properties": {
    "direct_message": {
      "default": false,
      "description": "if direct_message is set, the notification is sent directly\n to the persons and url will be ignored.\n IM integration setting should be set for this function to work.",
      "type": "boolean"
    },
    "name": {
      "default": "",
      "description": "name is the name of the webhook, generated by the server.\n format: projects/{project}/webhooks/{webhook}",
      "type": "string"
    },
    "notification_types": {
      "description": "notification_types is the list of activities types that the webhook is interested in.\n Bytebase will only send notifications to the webhook if the activity type is in the list.\n It should not be empty, and should be a subset of the following:\n - ISSUE_CREATE\n - ISSUE_COMMENT_CREATE\n - ISSUE_FIELD_UPDATE\n - ISSUE_STATUS_UPDATE\n - ISSUE_APPROVAL_NOTIFY\n - ISSUE_PIPELINE_STAGE_STATUS_UPDATE\n - ISSUE_PIPELINE_TASK_RUN_STATUS_UPDATE\n - NOTIFY_ISSUE_APPROVED\n - NOTIFY_PIPELINE_ROLLOUT",
      "items": {
        "anyOf": [
          {
            "enum": [
              "TYPE_UNSPECIFIED",
              "NOTIFY_ISSUE_APPROVED",
              "NOTIFY_PIPELINE_ROLLOUT",
              "ISSUE_CREATE",
              "ISSUE_COMMENT_CREATE",
              "ISSUE_FIELD_UPDATE",
              "ISSUE_STATUS_UPDATE",
              "ISSUE_APPROVAL_NOTIFY",
              "ISSUE_PIPELINE_STAGE_STATUS_UPDATE",
              "ISSUE_PIPELINE_TASK_RUN_STATUS_UPDATE"
            ],
            "type": "string"
          },
          {
            "maximum": 2147483647,
            "minimum": -2147483648,
            "type": "integer"
          }
        ],
        "title": "Type"
      },
      "type": "array"
    },
    "title": {
      "default": "",
      "description": "title is the title of the webhook.",
      "type": "string"
    },
    "type": {
      "anyOf": [
        {
          "pattern": "^TYPE_UNSPECIFIED$",
          "type": "string"
        },
        {
          "enum": [
            "SLACK",
            "DISCORD",
            "TEAMS",
            "DINGTALK",
            "FEISHU",
            "WECOM",
            "LARK"
          ],
          "type": "string"
        },
        {
          "maximum": 2147483647,
          "minimum": -2147483648,
          "type": "integer"
        }
      ],
      "default": 0,
      "description": "type is the type of the webhook.",
      "title": "Type"
    },
    "url": {
      "default": "",
      "description": "url is the url of the webhook, should be unique within the project.",
      "type": "string"
    }
  },
  "title": "Webhook",
  "type": "object"
}
