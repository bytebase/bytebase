{
  "$id": "bytebase.v1.MaskingExceptionPolicy.MaskingException.jsonschema.strict.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "description": "An exception allowing specific users to access masked data.",
  "properties": {
    "action": {
      "description": "The action that the user can perform on sensitive data.",
      "enum": [
        "ACTION_UNSPECIFIED",
        "QUERY",
        "EXPORT"
      ],
      "title": "Action",
      "type": "string"
    },
    "condition": {
      "$ref": "google.type.Expr.jsonschema.strict.json",
      "description": "Support variables:\n resource.instance_id: the instance resource id. Only support \"==\" operation.\n resource.database_name: the database name. Only support \"==\" operation.\n resource.schema_name: the schema name. Only support \"==\" operation.\n resource.table_name: the table name. Only support \"==\" operation.\n resource.column_name: the column name. Only support \"==\" operation.\n request.time: the expiration. Only support \"\u003c\" operation in `request.time \u003c timestamp(\"{ISO datetime string format}\")`\n All variables should join with \"\u0026\u0026\" condition.\n\n For example:\n resource.instance_id == \"local\" \u0026\u0026 resource.database_name == \"employee\" \u0026\u0026 request.time \u003c timestamp(\"2025-04-30T11:10:39.000Z\")\n resource.instance_id == \"local\" \u0026\u0026 resource.database_name == \"employee\"",
      "title": "The condition that is associated with this exception policy instance.\n The syntax and semantics of CEL are documented at https://github.com/google/cel-spec\n If the condition is empty, means the user can access all databases without expiration."
    },
    "member": {
      "description": "- `user:{email}`: An email address that represents a specific Bytebase account. For example, `alice@example.com`.\n - `group:{email}`: An email address for group.",
      "title": "Member is the principal who bind to this exception policy instance.",
      "type": "string"
    }
  },
  "required": [
    "action",
    "member"
  ],
  "title": "Masking Exception",
  "type": "object"
}
