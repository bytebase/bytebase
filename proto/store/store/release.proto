syntax = "proto3";

package bytebase.store;

import "store/common.proto";

option go_package = "generated-go/store";

message ReleasePayload {
  string title = 1;

  repeated File files = 2;

  VCSSource vcs_source = 3;

  SchemaChangeType type = 4;

  message File {
    // The unique identifier for the file.
    string id = 1;
    // The path of the file, e.g., `2.2/V0001_create_table.sql`.
    string path = 2;
    reserved 3; // Previously: string sheet (resource name)
    // The SHA256 hash of the sheet content (hex-encoded).
    string sheet_sha256 = 4;
    string version = 6;
    // Whether to use gh-ost for online schema migration.
    bool enable_ghost = 7;
  }

  message VCSSource {
    VCSType vcs_type = 1;
    string url = 2;
  }
}
