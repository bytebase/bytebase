?   	github.com/bytebase/bytebase/action	[no test files]
?   	github.com/bytebase/bytebase/action/github	[no test files]
?   	github.com/bytebase/bytebase/backend/api/auth	[no test files]
?   	github.com/bytebase/bytebase/backend/api/directory-sync	[no test files]
=== RUN   TestOffsetForPosition
--- PASS: TestOffsetForPosition (0.00s)
=== RUN   TestGetSQLStatementRangesUTF16Position
--- PASS: TestGetSQLStatementRangesUTF16Position (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/api/lsp	(cached)
=== RUN   TestGetResourceFromRequest
--- PASS: TestGetResourceFromRequest (0.00s)
=== RUN   TestToSnakeCase
--- PASS: TestToSnakeCase (0.00s)
=== RUN   TestExtractDomain
--- PASS: TestExtractDomain (0.00s)
=== RUN   TestGetFirstSemanticTypeInPath
--- PASS: TestGetFirstSemanticTypeInPath (0.00s)
=== RUN   TestWalkAndMaskJSON
--- PASS: TestWalkAndMaskJSON (0.00s)
=== RUN   TestIsValidResourceID
--- PASS: TestIsValidResourceID (0.00s)
=== RUN   TestGetEBNFTokens
--- PASS: TestGetEBNFTokens (0.00s)
=== RUN   TestParseFilter
--- PASS: TestParseFilter (0.00s)
=== RUN   TestParseOrderBy
--- PASS: TestParseOrderBy (0.00s)
=== RUN   TestCheckDatabaseMetadata
--- PASS: TestCheckDatabaseMetadata (0.00s)
=== RUN   TestIsSecretValid
--- PASS: TestIsSecretValid (0.00s)
=== RUN   TestListDatabaseFilter
--- PASS: TestListDatabaseFilter (0.00s)
=== RUN   TestConvertToApprovalNode
--- PASS: TestConvertToApprovalNode (0.00s)
=== RUN   TestEvalMaskingLevelOfColumn
--- PASS: TestEvalMaskingLevelOfColumn (0.00s)
=== RUN   TestValidateMembers
--- PASS: TestValidateMembers (0.00s)
=== RUN   TestValidateBindings
--- PASS: TestValidateBindings (0.00s)
=== RUN   TestValidateIAMPolicyExpression
--- PASS: TestValidateIAMPolicyExpression (0.00s)
=== RUN   TestFindIamPolicyDeltas
--- PASS: TestFindIamPolicyDeltas (0.00s)
=== RUN   TestListProjectFilter
--- PASS: TestListProjectFilter (0.00s)
=== RUN   TestValidateResourceID
--- PASS: TestValidateResourceID (0.00s)
=== RUN   TestValidateDomains
--- PASS: TestValidateDomains (0.00s)
=== RUN   TestGetSQLStatementPrefix
--- PASS: TestGetSQLStatementPrefix (0.00s)
=== RUN   TestExportSQL
--- PASS: TestExportSQL (0.00s)
=== RUN   TestGetExcelColumnName
--- PASS: TestGetExcelColumnName (0.00s)
=== RUN   TestExportJSON
--- PASS: TestExportJSON (0.00s)
=== RUN   TestListUserFilter
--- PASS: TestListUserFilter (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/api/v1	(cached)
?   	github.com/bytebase/bytebase/backend/base	[no test files]
?   	github.com/bytebase/bytebase/backend/bin/server	[no test files]
?   	github.com/bytebase/bytebase/backend/bin/server/cmd	[no test files]
=== RUN   TestPartialEval
--- PASS: TestPartialEval (0.00s)
=== RUN   TestGetQueryExportFactors
--- PASS: TestGetQueryExportFactors (0.00s)
=== RUN   TestGetClassificationAndUserComment
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_1abc
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_abc
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_-abc
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_0-abc
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_1-2-abc
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_1
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_1-_2
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_1-2
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_1-2a
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_1:a
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_1-2_abc
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_1_2
=== RUN   TestGetClassificationAndUserComment/test_classification_for_comment:_7-8-9-stuff-not-exists
--- PASS: TestGetClassificationAndUserComment (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_1abc (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_abc (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_-abc (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_0-abc (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_1-2-abc (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_1 (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_1-_2 (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_1-2 (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_1-2a (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_1:a (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_1-2_abc (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_1_2 (0.00s)
    --- PASS: TestGetClassificationAndUserComment/test_classification_for_comment:_7-8-9-stuff-not-exists (0.00s)
=== RUN   TestConvertPositionToANTLRPosition
--- PASS: TestConvertPositionToANTLRPosition (0.00s)
=== RUN   TestConvertANTLRPositionToPosition
--- PASS: TestConvertANTLRPositionToPosition (0.00s)
=== RUN   TestConvertPositionToUTF16Position
--- PASS: TestConvertPositionToUTF16Position (0.00s)
=== RUN   TestGetInstanceDatabaseID
--- PASS: TestGetInstanceDatabaseID (0.00s)
=== RUN   TestGetSchemaTableName
--- PASS: TestGetSchemaTableName (0.00s)
=== RUN   TestGetRiskID
--- PASS: TestGetRiskID (0.00s)
=== RUN   TestHasPrefixes
=== RUN   TestHasPrefixes/has_prefixes
=== RUN   TestHasPrefixes/has_no_matching_prefix
--- PASS: TestHasPrefixes (0.00s)
    --- PASS: TestHasPrefixes/has_prefixes (0.00s)
    --- PASS: TestHasPrefixes/has_no_matching_prefix (0.00s)
=== RUN   TestTruncateString
=== RUN   TestTruncateString/simple_truncate_0
=== RUN   TestTruncateString/simple_truncate_2
=== RUN   TestTruncateString/simple_truncate_3
=== RUN   TestTruncateString/simple_truncate_4
=== RUN   TestTruncateString/simple_truncate_20
=== RUN   TestTruncateString/unicode_truncate_5
=== RUN   TestTruncateString/unicode_truncate_10
=== RUN   TestTruncateString/unicode_fit
--- PASS: TestTruncateString (0.00s)
    --- PASS: TestTruncateString/simple_truncate_0 (0.00s)
    --- PASS: TestTruncateString/simple_truncate_2 (0.00s)
    --- PASS: TestTruncateString/simple_truncate_3 (0.00s)
    --- PASS: TestTruncateString/simple_truncate_4 (0.00s)
    --- PASS: TestTruncateString/simple_truncate_20 (0.00s)
    --- PASS: TestTruncateString/unicode_truncate_5 (0.00s)
    --- PASS: TestTruncateString/unicode_truncate_10 (0.00s)
    --- PASS: TestTruncateString/unicode_fit (0.00s)
=== RUN   TestObfuscate
--- PASS: TestObfuscate (0.00s)
=== RUN   TestNormalizeExternalURL
=== RUN   TestNormalizeExternalURL/http://localhost:3000
=== RUN   TestNormalizeExternalURL/https://localhost:3000
=== RUN   TestNormalizeExternalURL/https://localhost
=== RUN   TestNormalizeExternalURL/http://localhost:80
=== RUN   TestNormalizeExternalURL/https://localhost:443
=== RUN   TestNormalizeExternalURL/__https://localhost:3000/_
=== RUN   TestNormalizeExternalURL/localhost:3000
=== RUN   TestNormalizeExternalURL/http://localhost:xxx
--- PASS: TestNormalizeExternalURL (0.00s)
    --- PASS: TestNormalizeExternalURL/http://localhost:3000 (0.00s)
    --- PASS: TestNormalizeExternalURL/https://localhost:3000 (0.00s)
    --- PASS: TestNormalizeExternalURL/https://localhost (0.00s)
    --- PASS: TestNormalizeExternalURL/http://localhost:80 (0.00s)
    --- PASS: TestNormalizeExternalURL/https://localhost:443 (0.00s)
    --- PASS: TestNormalizeExternalURL/__https://localhost:3000/_ (0.00s)
    --- PASS: TestNormalizeExternalURL/localhost:3000 (0.00s)
    --- PASS: TestNormalizeExternalURL/http://localhost:xxx (0.00s)
=== RUN   TestValidatePhone
--- PASS: TestValidatePhone (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/common	(cached)
?   	github.com/bytebase/bytebase/backend/common/log	[no test files]
=== RUN   TestTakeStacktrace
--- PASS: TestTakeStacktrace (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/common/stacktrace	(cached)
?   	github.com/bytebase/bytebase/backend/component/config	[no test files]
?   	github.com/bytebase/bytebase/backend/component/dbfactory	[no test files]
?   	github.com/bytebase/bytebase/backend/component/ghost	[no test files]
=== RUN   TestCheck
--- PASS: TestCheck (0.00s)
=== RUN   TestPermissionExists
--- PASS: TestPermissionExists (0.00s)
=== RUN   TestPermissionEquals
--- PASS: TestPermissionEquals (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/component/iam	(cached)
=== RUN   TestMiddle_Byte
--- PASS: TestMiddle_Byte (0.00s)
=== RUN   TestMiddle_Rune
--- PASS: TestMiddle_Rune (0.00s)
=== RUN   TestRangeMask
--- PASS: TestRangeMask (0.00s)
=== RUN   TestInnerOuterMask
--- PASS: TestInnerOuterMask (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/component/masker	(cached)
?   	github.com/bytebase/bytebase/backend/component/secret	[no test files]
?   	github.com/bytebase/bytebase/backend/component/sheet	[no test files]
?   	github.com/bytebase/bytebase/backend/component/state	[no test files]
?   	github.com/bytebase/bytebase/backend/component/webhook	[no test files]
?   	github.com/bytebase/bytebase/backend/demo	[no test files]
?   	github.com/bytebase/bytebase/backend/enterprise/api	[no test files]
?   	github.com/bytebase/bytebase/backend/enterprise/config	[no test files]
?   	github.com/bytebase/bytebase/backend/enterprise/plugin	[no test files]
?   	github.com/bytebase/bytebase/backend/enterprise/plugin/aws	[no test files]
?   	github.com/bytebase/bytebase/backend/enterprise/plugin/hub	[no test files]
?   	github.com/bytebase/bytebase/backend/enterprise/service	[no test files]
?   	github.com/bytebase/bytebase/backend/metric	[no test files]
?   	github.com/bytebase/bytebase/backend/metric/collector	[no test files]
=== RUN   TestLatestVersion
--- PASS: TestLatestVersion (0.00s)
=== RUN   TestVersionUnique
--- PASS: TestVersionUnique (0.00s)
=== RUN   TestGetVersionFromPath
--- PASS: TestGetVersionFromPath (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/migrator	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/advisor	[no test files]
=== RUN   TestTiDBWalkThrough
--- PASS: TestTiDBWalkThrough (0.01s)
=== RUN   TestMySQLWalkThrough
--- PASS: TestMySQLWalkThrough (0.05s)
=== RUN   TestMySQLWalkThroughForIncomplete
--- PASS: TestMySQLWalkThroughForIncomplete (0.00s)
=== RUN   TestPostgreSQLWalkThrough
--- PASS: TestPostgreSQLWalkThrough (0.01s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/advisor/catalog	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/advisor/generator	[no test files]
=== RUN   TestMSSQLRules
--- PASS: TestMSSQLRules (0.51s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/advisor/mssql	(cached)
=== RUN   TestGetTextLength
--- PASS: TestGetTextLength (0.00s)
=== RUN   TestMySQLRules
--- PASS: TestMySQLRules (0.26s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/advisor/mysql	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/advisor/oceanbase	[no test files]
=== RUN   TestOracleRules
--- PASS: TestOracleRules (0.48s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/advisor/oracle	(cached)
=== RUN   TestPostgreSQLRules
    utils_for_tests.go:256: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/plugin/advisor/utils_for_tests.go:256
        	            				/Users/h3n4l/OpenSource/bytebase/backend/plugin/advisor/pg/pg_rules_test.go:69
        	Error:      	Not equal: 
        	            	expected: []*store.Advice{(*store.Advice)(0x1400ef443c0)}
        	            	actual  : []*store.Advice{(*store.Advice)(0x1400ef451a0)}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -25,3 +25,3 @@
        	            	    },
        	            	-   Line: (int32) 1,
        	            	+   Line: (int32) 0,
        	            	    Column: (int32) 0,
        	Test:       	TestPostgreSQLRules
        	Messages:   	rule: column.required, statements: ALTER TABLE tech_book ADD COLUMN creator_id int;
        	            	ALTER TABLE tech_book RENAME COLUMN creator_id TO creator;
--- FAIL: TestPostgreSQLRules (0.05s)
FAIL
FAIL	github.com/bytebase/bytebase/backend/plugin/advisor/pg	2.677s
=== RUN   TestSnowflakeRules
--- PASS: TestSnowflakeRules (0.51s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/advisor/snowflake	(cached)
=== RUN   TestTiDBRules
--- PASS: TestTiDBRules (0.02s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/advisor/tidb	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/db	[no test files]
=== RUN   TestEncodeOperatorEmail
--- PASS: TestEncodeOperatorEmail (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/bigquery	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/db/cassandra	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/db/clickhouse	[no test files]
=== RUN   TestGetDatabaseInCreateDatabaseStatement
--- PASS: TestGetDatabaseInCreateDatabaseStatement (0.00s)
=== RUN   TestGetRoutingIDFromCockroachCloudURL
--- PASS: TestGetRoutingIDFromCockroachCloudURL (0.00s)
=== RUN   TestIsAtLeastPG10
2025/04/24 16:22:47 ERROR invalid postgres version version=hello
--- PASS: TestIsAtLeastPG10 (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/cockroachdb	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/db/cosmosdb	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/db/databricks	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/db/dm	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/db/dynamodb	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/db/elasticsearch	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/db/hive	[no test files]
=== RUN   TestGetMongoDBConnectionURL
--- PASS: TestGetMongoDBConnectionURL (0.00s)
=== RUN   TestIsMongoStatement
--- PASS: TestIsMongoStatement (0.00s)
=== RUN   TestGetSimpleStatementResult
--- PASS: TestGetSimpleStatementResult (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/mongodb	(cached)
=== RUN   TestGetStatementWithResultLimit
--- PASS: TestGetStatementWithResultLimit (0.41s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/mssql	(cached)
=== RUN   TestParseVersion
--- PASS: TestParseVersion (0.00s)
=== RUN   TestGetStatementWithResultLimit
--- PASS: TestGetStatementWithResultLimit (0.04s)
=== RUN   TestSetColumnMetadataDefault
--- PASS: TestSetColumnMetadataDefault (0.00s)
=== RUN   TestGetViewDefFromCreateView
--- PASS: TestGetViewDefFromCreateView (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/mysql	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/db/obo	[no test files]
=== RUN   TestParseVersion
--- PASS: TestParseVersion (0.00s)
=== RUN   TestGetStatementWithResultLimit
--- PASS: TestGetStatementWithResultLimit (1.09s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/oracle	(cached)
=== RUN   TestGetDatabaseInCreateDatabaseStatement
--- PASS: TestGetDatabaseInCreateDatabaseStatement (0.00s)
=== RUN   TestPadZeroes
--- PASS: TestPadZeroes (0.00s)
=== RUN   TestIsAtLeastPG10
2025/04/24 16:22:59 ERROR invalid postgres version version=hello
--- PASS: TestIsAtLeastPG10 (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/pg	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/db/redis	[no test files]
=== RUN   TestGetPgVersionAndRedshiftVersion
--- PASS: TestGetPgVersionAndRedshiftVersion (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/redshift	(cached)
=== RUN   TestGetDatabaseInCreateDatabaseStatement
--- PASS: TestGetDatabaseInCreateDatabaseStatement (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/risingwave	(cached)
=== RUN   TestGetStatementWithResultLimit
--- PASS: TestGetStatementWithResultLimit (0.50s)
=== RUN   TestBuildSnowflakeDSN
--- PASS: TestBuildSnowflakeDSN (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/snowflake	(cached)
=== RUN   TestGetDatabaseFromDSN
--- PASS: TestGetDatabaseFromDSN (0.00s)
=== RUN   TestGetColumnTypeName
--- PASS: TestGetColumnTypeName (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/spanner	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/db/sqlite	[no test files]
=== RUN   TestGetTemporaryView
--- PASS: TestGetTemporaryView (0.00s)
=== RUN   TestGetStatementWithResultLimit
--- PASS: TestGetStatementWithResultLimit (0.03s)
=== RUN   TestParseVersion
--- PASS: TestParseVersion (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/starrocks	(cached)
=== RUN   TestGetTemporaryView
--- PASS: TestGetTemporaryView (0.00s)
=== RUN   TestExcludeSchemaAutoValue
--- PASS: TestExcludeSchemaAutoValue (0.00s)
=== RUN   TestGetStatementWithResultLimit
--- PASS: TestGetStatementWithResultLimit (0.00s)
=== RUN   TestSetColumnMetadataDefault
--- PASS: TestSetColumnMetadataDefault (0.00s)
=== RUN   TestParseVersion
--- PASS: TestParseVersion (0.00s)
=== RUN   TestIsNonTransactionStatement
--- PASS: TestIsNonTransactionStatement (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/tidb	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/db/trino	[no test files]
=== RUN   TestRemoveCommentsAndTrim
--- PASS: TestRemoveCommentsAndTrim (0.00s)
=== RUN   TestSanitizeQuery
--- PASS: TestSanitizeQuery (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/db/util	(cached)
=== RUN   TestGetValueWithKey
--- PASS: TestGetValueWithKey (0.00s)
=== RUN   TestGetValueWithKeyFromJSONString
--- PASS: TestGetValueWithKeyFromJSONString (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/idp	(cached)
=== RUN   TestNewIdentityProvider
=== RUN   TestNewIdentityProvider/no_host
=== RUN   TestNewIdentityProvider/no_bindDn
=== RUN   TestNewIdentityProvider/no_bindPassword
=== RUN   TestNewIdentityProvider/no_baseDn
=== RUN   TestNewIdentityProvider/no_userFilter
=== RUN   TestNewIdentityProvider/no_fieldMapping.identifier
--- PASS: TestNewIdentityProvider (0.00s)
    --- PASS: TestNewIdentityProvider/no_host (0.00s)
    --- PASS: TestNewIdentityProvider/no_bindDn (0.00s)
    --- PASS: TestNewIdentityProvider/no_bindPassword (0.00s)
    --- PASS: TestNewIdentityProvider/no_baseDn (0.00s)
    --- PASS: TestNewIdentityProvider/no_userFilter (0.00s)
    --- PASS: TestNewIdentityProvider/no_fieldMapping.identifier (0.00s)
=== RUN   TestIdentityProvider
2025/04/24 14:41:45 Listening on 127.0.0.1:10389
2025/04/24 14:41:46 Connection client [1] from 127.0.0.1:58508 accepted
2025/04/24 14:41:46 <<< 1 - BindRequest - hex=&{3054020101604f02010304407569643d73797374656d2c6f753d55736572732c6f3d3634353661356539633235646162623531636361643338352c64633d6578616d706c652c64633d636f6d800870612424776f7264}
2025/04/24 14:41:46 >>> 1 - BindResponse - hex=300c02010161070a010004000400
2025/04/24 14:41:46 <<< 1 - SearchRequest - hex=&{30819102010263818b04356f753d55736572732c6f3d3634353661356539633235646162623531636361643338352c64633d6578616d706c652c64633d636f6d0a01020a0100020100020100010100a02ba31b040b6f626a656374436c617373040c706f7369784163636f756e74a30c04037569640405616c69636530160402646e0403756964040b646973706c61794e616d65}
2025/04/24 14:41:46 >>> 1 - SearchResultEntry - hex=305902010264540405616c696365304b300e040375696431070405616c696365301c040b646973706c61794e616d65310d040b416c69636520536d697468301b04046d61696c31130411616c696365406578616d706c652e636f6d
2025/04/24 14:41:46 >>> 1 - SearchResultDone - hex=300c02010265070a010004000400
2025/04/24 14:41:46 <<< 1 - BindRequest - hex=&{301902010360140201030405616c696365800870612424776f7264}
2025/04/24 14:41:46 >>> 1 - BindResponse - hex=300c02010361070a010004000400
2025/04/24 14:41:46 gracefully closing client connections...
2025/04/24 14:41:46 >>> 1 - ExtendedResponse - hex=303a02010078350a0135040004177365727665722069732061626f757420746f2073746f708a15312e332e362e312e342e312e313436362e32303033
2025/04/24 14:41:46 Error readMessagePacket: EOF
2025/04/24 14:41:46 client 1 close()
2025/04/24 14:41:46 client 1 close() - stop reading from client
2025/04/24 14:41:46 client 1 close() - Abandon signal sent to processors
2025/04/24 14:41:46 client [1] request processors ended
2025/04/24 14:41:46 client [1] connection closed
2025/04/24 14:41:46 all clients connection closed
--- PASS: TestIdentityProvider (1.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/idp/ldap	(cached)
=== RUN   TestNewIdentityProvider
=== RUN   TestNewIdentityProvider/no_tokenUrl
=== RUN   TestNewIdentityProvider/no_userInfoUrl
=== RUN   TestNewIdentityProvider/no_field_mapping_identifier
--- PASS: TestNewIdentityProvider (0.00s)
    --- PASS: TestNewIdentityProvider/no_tokenUrl (0.00s)
    --- PASS: TestNewIdentityProvider/no_userInfoUrl (0.00s)
    --- PASS: TestNewIdentityProvider/no_field_mapping_identifier (0.00s)
=== RUN   TestIdentityProvider
--- PASS: TestIdentityProvider (0.00s)
=== RUN   TestIdentityProvider_SelfSigned
=== RUN   TestIdentityProvider_SelfSigned/verify_TLS
2025/04/24 14:41:45 http: TLS handshake error from 127.0.0.1:58503: remote error: tls: bad certificate
2025/04/24 14:41:45 ERROR Failed to exchange access token code=test-code error="Post \"https://127.0.0.1:58502/oauth2/token\": tls: failed to verify certificate: x509: certificate signed by unknown authority"
=== RUN   TestIdentityProvider_SelfSigned/skip_TLS_verify
--- PASS: TestIdentityProvider_SelfSigned (0.02s)
    --- PASS: TestIdentityProvider_SelfSigned/verify_TLS (0.02s)
    --- PASS: TestIdentityProvider_SelfSigned/skip_TLS_verify (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/idp/oauth2	(cached)
=== RUN   TestNewIdentityProvider
=== RUN   TestNewIdentityProvider/no_issuer
=== RUN   TestNewIdentityProvider/no_clientId
=== RUN   TestNewIdentityProvider/no_clientSecret
=== RUN   TestNewIdentityProvider/no_fieldMapping.identifier
--- PASS: TestNewIdentityProvider (0.00s)
    --- PASS: TestNewIdentityProvider/no_issuer (0.00s)
    --- PASS: TestNewIdentityProvider/no_clientId (0.00s)
    --- PASS: TestNewIdentityProvider/no_clientSecret (0.00s)
    --- PASS: TestNewIdentityProvider/no_fieldMapping.identifier (0.00s)
=== RUN   TestIdentityProvider
--- PASS: TestIdentityProvider (0.06s)
=== RUN   TestIdentityProvider_SelfSigned
=== RUN   TestIdentityProvider_SelfSigned/verify_TLS
=== RUN   TestIdentityProvider_SelfSigned/skip_TLS_verify
2025/04/24 14:41:46 http: TLS handshake error from 127.0.0.1:58510: remote error: tls: bad certificate
--- PASS: TestIdentityProvider_SelfSigned (0.37s)
    --- PASS: TestIdentityProvider_SelfSigned/verify_TLS (0.23s)
    --- PASS: TestIdentityProvider_SelfSigned/skip_TLS_verify (0.14s)
=== RUN   TestGetOpenIDConfigration
=== RUN   TestGetOpenIDConfigration/https://accounts.google.com
--- PASS: TestGetOpenIDConfigration (0.27s)
    --- PASS: TestGetOpenIDConfigration/https://accounts.google.com (0.27s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/idp/oidc	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/mail	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/metric	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/metric/segment	[no test files]
=== RUN   TestTSQLRecognizeExplainType
--- PASS: TestTSQLRecognizeExplainType (0.00s)
=== RUN   TestString
--- PASS: TestString (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/base	(cached)
=== RUN   TestGetQuerySpan
--- PASS: TestGetQuerySpan (0.20s)
=== RUN   TestGetPossibleColumnResources
--- PASS: TestGetPossibleColumnResources (0.00s)
=== RUN   TestBigQuerySplitMultiSQL
--- PASS: TestBigQuerySplitMultiSQL (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/bigquery	(cached)
=== RUN   TestSplitSQLStatement
--- PASS: TestSplitSQLStatement (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/cockroachdb	(cached)
=== RUN   TestPredicateInWhere
--- PASS: TestPredicateInWhere (0.00s)
=== RUN   TestGetQuerySpan
--- PASS: TestGetQuerySpan (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/cosmosdb	0.450s
=== RUN   TestParseElasticsearchREST
--- PASS: TestParseElasticsearchREST (0.00s)
=== RUN   TestParse
--- PASS: TestParse (0.00s)
=== RUN   TestGetEditorRequest
--- PASS: TestGetEditorRequest (0.00s)
=== RUN   TestContainsComments
--- PASS: TestContainsComments (0.00s)
=== RUN   TestStatementRanges
--- PASS: TestStatementRanges (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/elasticsearch	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/parser/errors	[no test files]
=== RUN   TestExtractEnvironmentIDs
--- PASS: TestExtractEnvironmentIDs (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/mybatis/configuration	(cached)
=== RUN   TestParser
--- PASS: TestParser (0.06s)
=== RUN   TestRestoreWithLineMapping
--- PASS: TestRestoreWithLineMapping (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/mybatis/mapper	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/parser/mybatis/mapper/ast	[no test files]
=== RUN   TestBackup
    backup_test.go:60: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/plugin/parser/mysql/backup_test.go:60
        	Error:      	Not equal: 
        	            	expected: []base.BackupStatement{base.BackupStatement{Statement:"CREATE TABLE `backupDB`.`_rollback_test_db` LIKE `db`.`test`;\nINSERT INTO `backupDB`.`_rollback_test_db`  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 1\n  UNION DISTINCT\n  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 2\n  UNION DISTINCT\n  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 3\n  UNION DISTINCT\n  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 4\n  UNION DISTINCT\n  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 5\n  UNION DISTINCT\n  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 6;", SourceSchema:"", SourceTableName:"test", TargetTableName:"_rollback_test_db", StartPosition:(*store.Position)(0x14000206150), EndPosition:(*store.Position)(0x140002061b0)}}
        	            	actual  : []base.BackupStatement{base.BackupStatement{Statement:"CREATE TABLE `backupDB`.`_rollback_test_db` LIKE `db`.`test`;\nINSERT INTO `backupDB`.`_rollback_test_db`  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 1\n  UNION DISTINCT\n  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 2\n  UNION DISTINCT\n  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 3\n  UNION DISTINCT\n  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 4\n  UNION DISTINCT\n  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 5\n  UNION DISTINCT\n  WITH t_cte AS (\n  SELECT * FROM test WHERE test.b1 > 10\n) SELECT `test`.* FROM test, t_cte WHERE test.b1 = t_cte.b1 and test.b1 = 6;", SourceSchema:"", SourceTableName:"test", TargetTableName:"_rollback_test_db", StartPosition:(*store.Position)(0x1400092cd50), EndPosition:(*store.Position)(0x1400092cf00)}}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -16,3 +16,3 @@
        	            	    },
        	            	-   Line: (int32) 1,
        	            	+   Line: (int32) 0,
        	            	    Column: (int32) 0,
        	            	@@ -31,3 +31,3 @@
        	            	    },
        	            	-   Line: (int32) 18,
        	            	+   Line: (int32) 17,
        	            	    Column: (int32) 77,
        	Test:       	TestBackup
        	Messages:   	WITH t_cte AS (
        	            	  SELECT * FROM test WHERE test.b1 > 10
        	            	) UPDATE test, t_cte SET test.c1 = 1 WHERE test.b1 = t_cte.b1 and test.b1 = 1;
        	            	WITH t_cte AS (
        	            	  SELECT * FROM test WHERE test.b1 > 10
        	            	) UPDATE test, t_cte SET test.c1 = 1 WHERE test.b1 = t_cte.b1 and test.b1 = 2;
        	            	WITH t_cte AS (
        	            	  SELECT * FROM test WHERE test.b1 > 10
        	            	) UPDATE test, t_cte SET test.c1 = 1 WHERE test.b1 = t_cte.b1 and test.b1 = 3;
        	            	WITH t_cte AS (
        	            	  SELECT * FROM test WHERE test.b1 > 10
        	            	) UPDATE test, t_cte SET test.c1 = 1 WHERE test.b1 = t_cte.b1 and test.b1 = 4;
        	            	WITH t_cte AS (
        	            	  SELECT * FROM test WHERE test.b1 > 10
        	            	) UPDATE test, t_cte SET test.c1 = 1 WHERE test.b1 = t_cte.b1 and test.b1 = 5;
        	            	WITH t_cte AS (
        	            	  SELECT * FROM test WHERE test.b1 > 10
        	            	) UPDATE test, t_cte SET test.c1 = 1 WHERE test.b1 = t_cte.b1 and test.b1 = 6;
--- FAIL: TestBackup (0.02s)
=== RUN   TestCompletion
--- PASS: TestCompletion (0.03s)
=== RUN   TestSchemaDiffTable
--- PASS: TestSchemaDiffTable (0.01s)
=== RUN   TestSchemaDiffColumn
--- PASS: TestSchemaDiffColumn (0.02s)
=== RUN   TestSchemaDiffIndex
--- PASS: TestSchemaDiffIndex (0.01s)
=== RUN   TestSchemaDiffView
--- PASS: TestSchemaDiffView (0.03s)
=== RUN   TestSchemaDiffFunction
--- PASS: TestSchemaDiffFunction (0.01s)
=== RUN   TestSchemaDiffProcedure
--- PASS: TestSchemaDiffProcedure (0.01s)
=== RUN   TestSchemaDiffEvent
--- PASS: TestSchemaDiffEvent (0.00s)
=== RUN   TestSchemaDiffTrigger
--- PASS: TestSchemaDiffTrigger (0.02s)
=== RUN   TestSchemaDiffConstraint
--- PASS: TestSchemaDiffConstraint (0.01s)
=== RUN   TestSchemaDiffPartition
--- PASS: TestSchemaDiffPartition (0.00s)
=== RUN   TestExtractDelimiter
--- PASS: TestExtractDelimiter (0.00s)
=== RUN   TestMySQLParser
--- PASS: TestMySQLParser (0.03s)
=== RUN   TestRestoreDelimiter
--- PASS: TestRestoreDelimiter (0.00s)
=== RUN   TestGetQuerySpan
--- PASS: TestGetQuerySpan (0.07s)
=== RUN   TestValidateSQLForEditor
--- PASS: TestValidateSQLForEditor (0.01s)
=== RUN   TestExtractMySQLResourceList
--- PASS: TestExtractMySQLResourceList (0.00s)
=== RUN   TestExtractChangedResources
--- PASS: TestExtractChangedResources (0.00s)
=== RUN   TestRestore
    restore_test.go:73: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/plugin/parser/mysql/restore_test.go:73
        	Error:      	Not equal: 
        	            	expected: "/*\nOriginal SQL:\nUPDATE t_generated SET a = 1 WHERE b = 1;\nUPDATE t_generated SET a = 2 WHERE b = 2;\nUPDATE t_generated SET a = 3 WHERE b = 3;\nUPDATE t_generated SET a = 4 WHERE b = 4;\nUPDATE t_generated SET a = 5 WHERE b = 5;\nUPDATE t_generated SET a = 6 WHERE b = 6;\nUPDATE t_generated SET a = 7 WHERE b = 7;\n*/\nINSERT INTO `db`.`t_generated` (`a`, `b`) SELECT `a`, `b` FROM `bbarchive`.`prefix_t_generated` ON DUPLICATE KEY UPDATE `a` = VALUES(`a`);"
        	            	actual  : "/*\nOriginal SQL:\n\nUPDATE t_generated SET a = 2 WHERE b = 2;\nUPDATE t_generated SET a = 3 WHERE b = 3;\nUPDATE t_generated SET a = 4 WHERE b = 4;\nUPDATE t_generated SET a = 5 WHERE b = 5;\nUPDATE t_generated SET a = 6 WHERE b = 6;\nUPDATE t_generated SET a = 7 WHERE b = 7;\n*/\nINSERT INTO `db`.`t_generated` (`a`, `b`) SELECT `a`, `b` FROM `bbarchive`.`prefix_t_generated` ON DUPLICATE KEY UPDATE `a` = VALUES(`a`);"
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -2,3 +2,3 @@
        	            	 Original SQL:
        	            	-UPDATE t_generated SET a = 1 WHERE b = 1;
        	            	+
        	            	 UPDATE t_generated SET a = 2 WHERE b = 2;
        	Test:       	TestRestore
        	Messages:   	UPDATE t_generated SET a = 1 WHERE b = 1;
        	            	UPDATE t_generated SET a = 2 WHERE b = 2;
        	            	UPDATE t_generated SET a = 3 WHERE b = 3;
        	            	UPDATE t_generated SET a = 4 WHERE b = 4;
        	            	UPDATE t_generated SET a = 5 WHERE b = 5;
        	            	UPDATE t_generated SET a = 6 WHERE b = 6;
        	            	UPDATE t_generated SET a = 7 WHERE b = 7;
--- FAIL: TestRestore (0.00s)
=== RUN   TestMySQLSplitMultiSQL
--- PASS: TestMySQLSplitMultiSQL (0.02s)
=== RUN   TestSplitMySQLStatements
--- PASS: TestSplitMySQLStatements (0.00s)
=== RUN   TestGetStatementType
    statement_type_test.go:38: UPDATE items,
           (SELECT id FROM items
            WHERE id IN
                (SELECT id FROM items
                 WHERE retail / wholesale >= 1.3 AND quantity < 100))
            AS discounted
        SET items.retail = items.retail * 0.9
        WHERE items.id = discounted.id;
    statement_type_test.go:38: INSERT INTO tbl_temp2 (fld_id)
        SELECT tbl_temp1.fld_order_id
        FROM tbl_temp1 WHERE tbl_temp1.fld_order_id > 100;
    statement_type_test.go:38: CREATE FUNCTION hello (s CHAR(20))
        RETURNS CHAR(50) DETERMINISTIC
        RETURN CONCAT('Hello, ',s,'!');
    statement_type_test.go:38: CREATE PROCEDURE citycount (IN country CHAR(3), OUT cities INT)
           BEGIN
             SELECT COUNT(*) INTO cities FROM world.city
             WHERE CountryCode = country;
           END;
    statement_type_test.go:38: CREATE TABLE t1 (a INT);
    statement_type_test.go:38: CREATE TABLE t2 LIKE t1;
    statement_type_test.go:38: CREATE TABLE t2 SELECT * FROM t1;
    statement_type_test.go:38: DROP TABLE t2;
    statement_type_test.go:38: CREATE VIEW v1 AS SELECT * FROM t1;
    statement_type_test.go:38: DROP VIEW v1;
    statement_type_test.go:38: CREATE EVENT myevent
        ON SCHEDULE AT CURRENT_TIMESTAMP + INTERVAL 1 HOUR
        DO
          UPDATE myschema.mytable SET mycol = mycol + 1;
    statement_type_test.go:38: DROP EVENT myevent;
    statement_type_test.go:38: CREATE PROCEDURE citycount (IN country CHAR(3), OUT cities INT)
           BEGIN
             SELECT COUNT(*) INTO cities FROM world.city
             WHERE CountryCode = country;
           END;
    statement_type_test.go:38: DROP PROCEDURE citycount;
--- PASS: TestGetStatementType (0.01s)
FAIL
FAIL	github.com/bytebase/bytebase/backend/plugin/parser/mysql	2.026s
=== RUN   TestCompletion
--- PASS: TestCompletion (0.01s)
=== RUN   TestSplitSQL
    split_test.go:58: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/plugin/parser/partiql/split_test.go:58
        	Error:      	Not equal: 
        	            	expected: []base.SingleSQL{base.SingleSQL{Text:"DELETE FROM Music WHERE Artist = 'Pink Floyd' AND SongTitle = 'Money';", BaseLine:0, Start:(*store.Position)(0x1400da7e390), End:(*store.Position)(0x1400da7e3c0), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"\n\tINSERT INTO Music VALUE {'AlbumTitle': 'The Dark Side of the Moon', 'Artist': 'Pink Floyd', 'Awards': 300, 'SongTitle': 'Money'};", BaseLine:0, Start:(*store.Position)(0x1400da7e3f0), End:(*store.Position)(0x1400da7e420), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"\n\tINSERT INTO Music VALUE {'AlbumTitle': 'The Dark Side of the Moon', 'Artist': 'Pink Floyd', 'Awards': 300, 'SongTitle': 'Money02'};", BaseLine:1, Start:(*store.Position)(0x1400da7e450), End:(*store.Position)(0x1400da7e480), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"\n\tINSERT INTO Music VALUE {'AlbumTitle': 'The Dark Side of the Moon', 'Artist': 'Pink Floyd', 'Awards': 300, 'SongTitle': 'Money03'};", BaseLine:2, Start:(*store.Position)(0x1400da7e4b0), End:(*store.Position)(0x1400da7e4e0), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"\n\tDELETE FROM Music WHERE Artist = 'Pink Floyd' AND SongTitle = 'Money02'", BaseLine:3, Start:(*store.Position)(0x1400da7e510), End:(*store.Position)(0x1400da7e540), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}}
        	            	actual  : []base.SingleSQL{base.SingleSQL{Text:"DELETE FROM Music WHERE Artist = 'Pink Floyd' AND SongTitle = 'Money';", BaseLine:0, Start:(*store.Position)(0x1400df4c510), End:(*store.Position)(0x1400df4c4e0), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"\n\tINSERT INTO Music VALUE {'AlbumTitle': 'The Dark Side of the Moon', 'Artist': 'Pink Floyd', 'Awards': 300, 'SongTitle': 'Money'};", BaseLine:0, Start:(*store.Position)(0x1400df4c570), End:(*store.Position)(0x1400df4c540), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"\n\tINSERT INTO Music VALUE {'AlbumTitle': 'The Dark Side of the Moon', 'Artist': 'Pink Floyd', 'Awards': 300, 'SongTitle': 'Money02'};", BaseLine:1, Start:(*store.Position)(0x1400df4c5d0), End:(*store.Position)(0x1400df4c5a0), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"\n\tINSERT INTO Music VALUE {'AlbumTitle': 'The Dark Side of the Moon', 'Artist': 'Pink Floyd', 'Awards': 300, 'SongTitle': 'Money03'};", BaseLine:2, Start:(*store.Position)(0x1400df4c630), End:(*store.Position)(0x1400df4c600), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"\n\tDELETE FROM Music WHERE Artist = 'Pink Floyd' AND SongTitle = 'Money02'", BaseLine:3, Start:(*store.Position)(0x1400df4c690), End:(*store.Position)(0x1400df4c660), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -178,3 +178,3 @@
        	            	    Line: (int32) 4,
        	            	-   Column: (int32) 63,
        	            	+   Column: (int32) 72,
        	            	    unknownFields: ([]uint8) <nil>,
        	Test:       	TestSplitSQL
--- FAIL: TestSplitSQL (0.00s)
FAIL
FAIL	github.com/bytebase/bytebase/backend/plugin/parser/partiql	1.081s
=== RUN   TestBackup
--- PASS: TestBackup (0.05s)
=== RUN   TestCompletion
--- PASS: TestCompletion (0.05s)
=== RUN   TestComputeDiff
--- PASS: TestComputeDiff (0.01s)
=== RUN   TestPostgreSQLParser
--- PASS: TestPostgreSQLParser (0.01s)
=== RUN   TestGetQuerySpan
--- PASS: TestGetQuerySpan (0.04s)
=== RUN   TestValidateSQLForEditor
--- PASS: TestValidateSQLForEditor (0.00s)
=== RUN   TestExtractPostgresResourceList
--- PASS: TestExtractPostgresResourceList (0.00s)
=== RUN   TestExtractChangedResources
--- PASS: TestExtractChangedResources (0.00s)
=== RUN   TestRestore
--- PASS: TestRestore (0.02s)
=== RUN   TestPGSplitMultiSQL
    split_test.go:318: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/plugin/parser/pg/split_test.go:318
        	Error:      	Not equal: 
        	            	expected: pg.resData{res:[]base.SingleSQL{base.SingleSQL{Text:"select * from t;", BaseLine:0, Start:(*store.Position)(nil), End:(*store.Position)(0x14000ec8000), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"\n\t\t\t/* sdfasdf */", BaseLine:0, Start:(*store.Position)(0x14000ec8060), End:(*store.Position)(0x14000ec8030), Empty:true, ByteOffsetStart:0, ByteOffsetEnd:0}}, err:""}
        	            	actual  : pg.resData{res:[]base.SingleSQL{base.SingleSQL{Text:"select * from t;", BaseLine:0, Start:(*store.Position)(0x14000ec93b0), End:(*store.Position)(0x14000ec9380), Empty:false, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"\n\t\t\t/* sdfasdf */", BaseLine:0, Start:(*store.Position)(0x14000ec9410), End:(*store.Position)(0x14000ec93e0), Empty:true, ByteOffsetStart:0, ByteOffsetEnd:0}}, err:""}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -5,3 +5,17 @@
        	            	    BaseLine: (int) 0,
        	            	-   Start: (*store.Position)(<nil>),
        	            	+   Start: (*store.Position)({
        	            	+    state: (impl.MessageState) {
        	            	+     NoUnkeyedLiterals: (pragma.NoUnkeyedLiterals) {
        	            	+     },
        	            	+     DoNotCompare: (pragma.DoNotCompare) {
        	            	+     },
        	            	+     DoNotCopy: (pragma.DoNotCopy) {
        	            	+     },
        	            	+     atomicMessageInfo: (*impl.MessageInfo)(<nil>)
        	            	+    },
        	            	+    Line: (int32) 0,
        	            	+    Column: (int32) 0,
        	            	+    unknownFields: ([]uint8) <nil>,
        	            	+    sizeCache: (int32) 0
        	            	+   }),
        	            	    End: (*store.Position)({
        	Test:       	TestPGSplitMultiSQL
        	Messages:   	select * from t;
        	            				/* sdfasdf */
--- FAIL: TestPGSplitMultiSQL (0.01s)
FAIL
FAIL	github.com/bytebase/bytebase/backend/plugin/parser/pg	1.537s
=== RUN   TestBackup
--- PASS: TestBackup (0.27s)
=== RUN   TestCompletion
--- PASS: TestCompletion (0.43s)
=== RUN   TestPLSQLDiffer
--- PASS: TestPLSQLDiffer (0.06s)
=== RUN   TestPlSQLDifferNonStrict
--- PASS: TestPlSQLDifferNonStrict (0.02s)
=== RUN   TestPLSQLParser
--- PASS: TestPLSQLParser (0.00s)
=== RUN   TestGetQuerySpan
--- PASS: TestGetQuerySpan (0.70s)
=== RUN   TestExtractOracleResourceList
--- PASS: TestExtractOracleResourceList (0.04s)
=== RUN   TestExtractChangedResources
--- PASS: TestExtractChangedResources (0.00s)
=== RUN   TestRestore
    restore_test.go:71: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/plugin/parser/plsql/restore_test.go:71
        	Error:      	Not equal: 
        	            	expected: "/*\nOriginal SQL:\nUPDATE T_GENERATED SET a = 1 WHERE b = 1;\nUPDATE T_GENERATED SET a = 2 WHERE b = 2;\nUPDATE T_GENERATED SET a = 3 WHERE b = 3;\nUPDATE T_GENERATED SET a = 4 WHERE b = 4;\nUPDATE T_GENERATED SET a = 5 WHERE b = 5;\nUPDATE T_GENERATED SET a = 6 WHERE b = 6;\nUPDATE T_GENERATED SET a = 7 WHERE b = 7\n*/\nMERGE INTO \"DB\".\"T_GENERATED\" t\nUSING \"bbarchive\".\"prefix_T_GENERATED\" b\n  ON( t.\"B\" = b.\"B\")\nWHEN MATCHED THEN\n  UPDATE SET t.\"A\" = b.\"A\"\nWHEN NOT MATCHED THEN\n INSERT (\"A\", \"B\") VALUES (b.\"A\", b.\"B\");"
        	            	actual  : "/*\nOriginal SQL:\nUPDATE T_GENERATED SET a = 2 WHERE b = 2;\nUPDATE T_GENERATED SET a = 3 WHERE b = 3;\nUPDATE T_GENERATED SET a = 4 WHERE b = 4;\nUPDATE T_GENERATED SET a = 5 WHERE b = 5;\nUPDATE T_GENERATED SET a = 6 WHERE b = 6;\nUPDATE T_GENERATED SET a = 7 WHERE b = 7\n*/\nMERGE INTO \"DB\".\"T_GENERATED\" t\nUSING \"bbarchive\".\"prefix_T_GENERATED\" b\n  ON( t.\"B\" = b.\"B\")\nWHEN MATCHED THEN\n  UPDATE SET t.\"A\" = b.\"A\"\nWHEN NOT MATCHED THEN\n INSERT (\"A\", \"B\") VALUES (b.\"A\", b.\"B\");"
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -2,3 +2,2 @@
        	            	 Original SQL:
        	            	-UPDATE T_GENERATED SET a = 1 WHERE b = 1;
        	            	 UPDATE T_GENERATED SET a = 2 WHERE b = 2;
        	Test:       	TestRestore
        	Messages:   	UPDATE T_GENERATED SET a = 1 WHERE b = 1;
        	            	UPDATE T_GENERATED SET a = 2 WHERE b = 2;
        	            	UPDATE T_GENERATED SET a = 3 WHERE b = 3;
        	            	UPDATE T_GENERATED SET a = 4 WHERE b = 4;
        	            	UPDATE T_GENERATED SET a = 5 WHERE b = 5;
        	            	UPDATE T_GENERATED SET a = 6 WHERE b = 6;
        	            	UPDATE T_GENERATED SET a = 7 WHERE b = 7;
--- FAIL: TestRestore (0.01s)
=== RUN   TestOracleSplitMultiSQL
    split_test.go:80: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/plugin/parser/plsql/split_test.go:80
        	Error:      	Not equal: 
        	            	expected: plsql.resData{res:[]base.SingleSQL{base.SingleSQL{Text:"select * from t", BaseLine:0, Start:(*store.Position)(0x14003a39710), End:(*store.Position)(0x14003a39770), Empty:false, ByteOffsetStart:5, ByteOffsetEnd:20}, base.SingleSQL{Text:"create table table$1 (id int)", BaseLine:0, Start:(*store.Position)(0x14003a397d0), End:(*store.Position)(0x14003a39830), Empty:false, ByteOffsetStart:26, ByteOffsetEnd:56}}, err:""}
        	            	actual  : plsql.resData{res:[]base.SingleSQL{base.SingleSQL{Text:"select * from t", BaseLine:0, Start:(*store.Position)(0x14003a3d650), End:(*store.Position)(0x14003a3d6b0), Empty:false, ByteOffsetStart:5, ByteOffsetEnd:20}, base.SingleSQL{Text:"create table table$1 (id int)", BaseLine:0, Start:(*store.Position)(0x14003a3d710), End:(*store.Position)(0x14003a3d770), Empty:false, ByteOffsetStart:26, ByteOffsetEnd:56}}, err:""}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -4,2 +4,39 @@
        	            	    Text: (string) (len=15) "select * from t",
        	            	+   BaseLine: (int) 0,
        	            	+   Start: (*store.Position)({
        	            	+    state: (impl.MessageState) {
        	            	+     NoUnkeyedLiterals: (pragma.NoUnkeyedLiterals) {
        	            	+     },
        	            	+     DoNotCompare: (pragma.DoNotCompare) {
        	            	+     },
        	            	+     DoNotCopy: (pragma.DoNotCopy) {
        	            	+     },
        	            	+     atomicMessageInfo: (*impl.MessageInfo)(<nil>)
        	            	+    },
        	            	+    Line: (int32) 1,
        	            	+    Column: (int32) 4,
        	            	+    unknownFields: ([]uint8) <nil>,
        	            	+    sizeCache: (int32) 0
        	            	+   }),
        	            	+   End: (*store.Position)({
        	            	+    state: (impl.MessageState) {
        	            	+     NoUnkeyedLiterals: (pragma.NoUnkeyedLiterals) {
        	            	+     },
        	            	+     DoNotCompare: (pragma.DoNotCompare) {
        	            	+     },
        	            	+     DoNotCopy: (pragma.DoNotCopy) {
        	            	+     },
        	            	+     atomicMessageInfo: (*impl.MessageInfo)(<nil>)
        	            	+    },
        	            	+    Line: (int32) 1,
        	            	+    Column: (int32) 18,
        	            	+    unknownFields: ([]uint8) <nil>,
        	            	+    sizeCache: (int32) 0
        	            	+   }),
        	            	+   Empty: (bool) false,
        	            	+   ByteOffsetStart: (int) 5,
        	            	+   ByteOffsetEnd: (int) 20
        	            	+  },
        	            	+  (base.SingleSQL) {
        	            	+   Text: (string) (len=29) "create table table$1 (id int)",
        	            	    BaseLine: (int) 0,
        	            	@@ -31,39 +68,2 @@
        	            	     Line: (int32) 2,
        	            	-    Column: (int32) 18,
        	            	-    unknownFields: ([]uint8) <nil>,
        	            	-    sizeCache: (int32) 0
        	            	-   }),
        	            	-   Empty: (bool) false,
        	            	-   ByteOffsetStart: (int) 5,
        	            	-   ByteOffsetEnd: (int) 20
        	            	-  },
        	            	-  (base.SingleSQL) {
        	            	-   Text: (string) (len=29) "create table table$1 (id int)",
        	            	-   BaseLine: (int) 0,
        	            	-   Start: (*store.Position)({
        	            	-    state: (impl.MessageState) {
        	            	-     NoUnkeyedLiterals: (pragma.NoUnkeyedLiterals) {
        	            	-     },
        	            	-     DoNotCompare: (pragma.DoNotCompare) {
        	            	-     },
        	            	-     DoNotCopy: (pragma.DoNotCopy) {
        	            	-     },
        	            	-     atomicMessageInfo: (*impl.MessageInfo)(<nil>)
        	            	-    },
        	            	-    Line: (int32) 3,
        	            	-    Column: (int32) 4,
        	            	-    unknownFields: ([]uint8) <nil>,
        	            	-    sizeCache: (int32) 0
        	            	-   }),
        	            	-   End: (*store.Position)({
        	            	-    state: (impl.MessageState) {
        	            	-     NoUnkeyedLiterals: (pragma.NoUnkeyedLiterals) {
        	            	-     },
        	            	-     DoNotCompare: (pragma.DoNotCompare) {
        	            	-     },
        	            	-     DoNotCopy: (pragma.DoNotCopy) {
        	            	-     },
        	            	-     atomicMessageInfo: (*impl.MessageInfo)(<nil>)
        	            	-    },
        	            	-    Line: (int32) 3,
        	            	     Column: (int32) 32,
        	Test:       	TestOracleSplitMultiSQL
        	Messages:   	
        	            					select * from t;
        	            					create table table$1 (id int)
        	            				
--- FAIL: TestOracleSplitMultiSQL (0.00s)
=== RUN   TestGetStatementType
--- PASS: TestGetStatementType (0.10s)
=== RUN   TestStringsManipulate
--- PASS: TestStringsManipulate (0.01s)
FAIL
FAIL	github.com/bytebase/bytebase/backend/plugin/parser/plsql	3.341s
=== RUN   TestValidateQuery
--- PASS: TestValidateQuery (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/redis	(cached)
=== RUN   TestGetQuerySpan
--- PASS: TestGetQuerySpan (0.48s)
=== RUN   TestValidateSQLForEditor
--- PASS: TestValidateSQLForEditor (0.02s)
=== RUN   TestExtractSnowflakeNormalizeResourceListFromSelectStatement
--- PASS: TestExtractSnowflakeNormalizeResourceListFromSelectStatement (0.07s)
=== RUN   TestSnowSqlExtractOrdinaryIdentifier
=== RUN   TestSnowSqlExtractOrdinaryIdentifier/table_name
=== RUN   TestSnowSqlExtractOrdinaryIdentifier/"table_name"
=== RUN   TestSnowSqlExtractOrdinaryIdentifier/"table_name"""
=== RUN   TestSnowSqlExtractOrdinaryIdentifier/"😈😄"""
--- PASS: TestSnowSqlExtractOrdinaryIdentifier (0.00s)
    --- PASS: TestSnowSqlExtractOrdinaryIdentifier/table_name (0.00s)
    --- PASS: TestSnowSqlExtractOrdinaryIdentifier/"table_name" (0.00s)
    --- PASS: TestSnowSqlExtractOrdinaryIdentifier/"table_name""" (0.00s)
    --- PASS: TestSnowSqlExtractOrdinaryIdentifier/"😈😄""" (0.00s)
=== RUN   TestParseSnowSQL
--- PASS: TestParseSnowSQL (0.03s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/snowflake	(cached)
=== RUN   TestGetQuerySpan
--- PASS: TestGetQuerySpan (0.17s)
=== RUN   TestGetPossibleColumnResources
--- PASS: TestGetPossibleColumnResources (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/spanner	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/parser/sql/ast	[no test files]
=== RUN   TestPGConvertCreateMaterializedViewStmt
--- PASS: TestPGConvertCreateMaterializedViewStmt (0.00s)
=== RUN   TestPGVariableShowStmt
--- PASS: TestPGVariableShowStmt (0.00s)
=== RUN   TestPGConvertCreateViewStmt
--- PASS: TestPGConvertCreateViewStmt (0.00s)
=== RUN   TestPGConvertCreateTableStmt
--- PASS: TestPGConvertCreateTableStmt (0.00s)
=== RUN   TestPGAddColumnStmt
--- PASS: TestPGAddColumnStmt (0.00s)
=== RUN   TestPGRenameTableStmt
--- PASS: TestPGRenameTableStmt (0.00s)
=== RUN   TestPGRenameColumnStmt
--- PASS: TestPGRenameColumnStmt (0.00s)
=== RUN   TestPGRenameConstraintStmt
--- PASS: TestPGRenameConstraintStmt (0.00s)
=== RUN   TestPGCreateIndexStmt
--- PASS: TestPGCreateIndexStmt (0.00s)
=== RUN   TestPGDropIndexStmt
--- PASS: TestPGDropIndexStmt (0.00s)
=== RUN   TestPGAlterIndexStmt
--- PASS: TestPGAlterIndexStmt (0.00s)
=== RUN   TestPGDropConstraintStmt
--- PASS: TestPGDropConstraintStmt (0.00s)
=== RUN   TestPGAddConstraintStmt
--- PASS: TestPGAddConstraintStmt (0.00s)
=== RUN   TestPGDropColumnStmt
--- PASS: TestPGDropColumnStmt (0.00s)
=== RUN   TestPGDropTableStmt
--- PASS: TestPGDropTableStmt (0.00s)
=== RUN   TestPGNotNullStmt
--- PASS: TestPGNotNullStmt (0.00s)
=== RUN   TestPGSelectStmt
--- PASS: TestPGSelectStmt (0.00s)
=== RUN   TestPGDropDatabaseStmt
--- PASS: TestPGDropDatabaseStmt (0.00s)
=== RUN   TestUpdateStmt
--- PASS: TestUpdateStmt (0.00s)
=== RUN   TestDeleteStmt
--- PASS: TestDeleteStmt (0.00s)
=== RUN   TestSetSchemaStmt
--- PASS: TestSetSchemaStmt (0.00s)
=== RUN   TestExplainStmt
--- PASS: TestExplainStmt (0.00s)
=== RUN   TestAlterColumnType
--- PASS: TestAlterColumnType (0.00s)
=== RUN   TestInsertStmt
--- PASS: TestInsertStmt (0.00s)
=== RUN   TestCopyStmt
--- PASS: TestCopyStmt (0.00s)
=== RUN   TestUnconvertStmt
--- PASS: TestUnconvertStmt (0.00s)
=== RUN   TestCommentStmt
--- PASS: TestCommentStmt (0.00s)
=== RUN   TestCreateDatabase
--- PASS: TestCreateDatabase (0.00s)
=== RUN   TestCreateSchema
--- PASS: TestCreateSchema (0.00s)
=== RUN   TestDropSchema
--- PASS: TestDropSchema (0.00s)
=== RUN   TestAlterColumnDefault
--- PASS: TestAlterColumnDefault (0.00s)
=== RUN   TestCreateSequence
--- PASS: TestCreateSequence (0.00s)
=== RUN   TestDropSequence
--- PASS: TestDropSequence (0.00s)
=== RUN   TestAlterSequence
--- PASS: TestAlterSequence (0.00s)
=== RUN   TestCreateExtension
--- PASS: TestCreateExtension (0.00s)
=== RUN   TestDropExtension
--- PASS: TestDropExtension (0.00s)
=== RUN   TestCreateFunction
--- PASS: TestCreateFunction (0.00s)
=== RUN   TestDropFunction
--- PASS: TestDropFunction (0.00s)
=== RUN   TestCreateTrigger
--- PASS: TestCreateTrigger (0.00s)
=== RUN   TestDropTrigger
--- PASS: TestDropTrigger (0.00s)
=== RUN   TestCreateType
--- PASS: TestCreateType (0.00s)
=== RUN   TestDropType
--- PASS: TestDropType (0.00s)
=== RUN   TestAlterType
--- PASS: TestAlterType (0.00s)
=== RUN   TestAttachPartition
--- PASS: TestAttachPartition (0.00s)
=== RUN   TestCommit
--- PASS: TestCommit (0.00s)
=== RUN   TestRenameSchema
--- PASS: TestRenameSchema (0.00s)
=== RUN   TestPGCreateTableSetLine
--- PASS: TestPGCreateTableSetLine (0.00s)
=== RUN   TestVariableSetStmt
--- PASS: TestVariableSetStmt (0.00s)
=== RUN   TestEquivalentType
--- PASS: TestEquivalentType (0.00s)
=== RUN   TestDeparse
--- PASS: TestDeparse (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/sql/engine/pg	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/parser/sql/transform	[no test files]
=== RUN   TestCreateTableSeparateIndex
--- PASS: TestCreateTableSeparateIndex (0.00s)
=== RUN   TestTransform
--- PASS: TestTransform (0.00s)
=== RUN   TestNormalize
--- PASS: TestNormalize (0.00s)
=== RUN   TestCheck
--- PASS: TestCheck (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/sql/transform/mysql	(cached)
=== RUN   TestValidateSQLForStandard
--- PASS: TestValidateSQLForStandard (0.00s)
=== RUN   TestApplyMultiStatements
--- PASS: TestApplyMultiStatements (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/standard	(cached)
=== RUN   TestBackup
    backup_test.go:60: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/plugin/parser/tidb/backup_test.go:60
        	Error:      	Not equal: 
        	            	expected: []base.BackupStatement{base.BackupStatement{Statement:"CREATE TABLE `backupDB`.`_rollback_test_db` LIKE `db`.`test`;\nINSERT INTO `backupDB`.`_rollback_test_db`  SELECT `test`.* FROM test WHERE test.b1 = 1\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 2\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 3\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 4\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 5\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 6\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 7;", SourceSchema:"", SourceTableName:"test", TargetTableName:"_rollback_test_db", StartPosition:(*store.Position)(0x14004827c80), EndPosition:(*store.Position)(0x14004827d40)}}
        	            	actual  : []base.BackupStatement{base.BackupStatement{Statement:"CREATE TABLE `backupDB`.`_rollback_test_db` LIKE `db`.`test`;\nINSERT INTO `backupDB`.`_rollback_test_db`  SELECT `test`.* FROM test WHERE test.b1 = 1\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 2\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 3\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 4\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 5\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 6\n  UNION ALL\n  SELECT `test`.* FROM test WHERE test.b1 = 7;", SourceSchema:"", SourceTableName:"test", TargetTableName:"_rollback_test_db", StartPosition:(*store.Position)(0x14004841c80), EndPosition:(*store.Position)(0x14004842120)}}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -16,3 +16,3 @@
        	            	    },
        	            	-   Line: (int32) 1,
        	            	+   Line: (int32) 0,
        	            	    Column: (int32) 0,
        	            	@@ -31,3 +31,3 @@
        	            	    },
        	            	-   Line: (int32) 7,
        	            	+   Line: (int32) 6,
        	            	    Column: (int32) 45,
        	Test:       	TestBackup
        	Messages:   	UPDATE test SET test.c1 = 1 WHERE test.b1 = 1;
        	            	UPDATE test SET test.c1 = 2 WHERE test.b1 = 2;
        	            	UPDATE test SET test.c1 = 3 WHERE test.b1 = 3;
        	            	UPDATE test SET test.c1 = 4 WHERE test.b1 = 4;
        	            	UPDATE test SET test.c1 = 5 WHERE test.b1 = 5;
        	            	UPDATE test SET test.c1 = 6 WHERE test.b1 = 6;
        	            	UPDATE test SET test.c1 = 7 WHERE test.b1 = 7;
--- FAIL: TestBackup (0.01s)
=== RUN   TestColumnExist
--- PASS: TestColumnExist (0.01s)
=== RUN   TestColumnType
--- PASS: TestColumnType (0.00s)
=== RUN   TestColumnOption
--- PASS: TestColumnOption (0.01s)
=== RUN   TestColumnComment
--- PASS: TestColumnComment (0.00s)
=== RUN   TestColumnDefaultValue
--- PASS: TestColumnDefaultValue (0.01s)
=== RUN   TestColumnCollate
--- PASS: TestColumnCollate (0.00s)
=== RUN   TestColumnOrder
--- PASS: TestColumnOrder (0.00s)
=== RUN   TestIsKeyPartEqual
--- PASS: TestIsKeyPartEqual (0.00s)
=== RUN   TestIsIndexOptionEqual
--- PASS: TestIsIndexOptionEqual (0.00s)
=== RUN   TestIndexType
--- PASS: TestIndexType (0.00s)
=== RUN   TestIndexOption
--- PASS: TestIndexOption (0.00s)
=== RUN   TestKeyPart
--- PASS: TestKeyPart (0.01s)
=== RUN   TestForeignKeyDefination
--- PASS: TestForeignKeyDefination (0.00s)
=== RUN   TestCheckConstraint
--- PASS: TestCheckConstraint (0.00s)
=== RUN   TestConstraint
--- PASS: TestConstraint (0.01s)
=== RUN   TestTable
--- PASS: TestTable (0.00s)
=== RUN   TestSchemaDiffPartition
--- PASS: TestSchemaDiffPartition (0.00s)
=== RUN   TestTableOption
--- PASS: TestTableOption (0.01s)
=== RUN   TestView
--- PASS: TestView (0.00s)
=== RUN   TestGetQuerySpan
--- PASS: TestGetQuerySpan (0.00s)
=== RUN   TestValidateSQLForEditor
--- PASS: TestValidateSQLForEditor (0.00s)
=== RUN   TestExtractChangedResources
--- PASS: TestExtractChangedResources (0.00s)
=== RUN   TestMySQLCreateTableSetLine
--- PASS: TestMySQLCreateTableSetLine (0.00s)
=== RUN   TestTiDBParserError
--- PASS: TestTiDBParserError (0.00s)
FAIL
FAIL	github.com/bytebase/bytebase/backend/plugin/parser/tidb	1.901s
=== RUN   TestSplitTiDBMultiSQL
    tokenizer_test.go:47: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/plugin/parser/tokenizer/tokenizer_test.go:47
        	Error:      	Not equal: 
        	            	expected: []base.SingleSQL{base.SingleSQL{Text:"-- comment", BaseLine:0, Start:(*store.Position)(nil), End:(*store.Position)(nil), Empty:true, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"DELIMITER ;", BaseLine:0, Start:(*store.Position)(nil), End:(*store.Position)(nil), Empty:false, ByteOffsetStart:11, ByteOffsetEnd:22}}
        	            	actual  : []base.SingleSQL{base.SingleSQL{Text:"-- comment", BaseLine:0, Start:(*store.Position)(nil), End:(*store.Position)(0x1400042a120), Empty:true, ByteOffsetStart:0, ByteOffsetEnd:0}, base.SingleSQL{Text:"DELIMITER ;", BaseLine:0, Start:(*store.Position)(nil), End:(*store.Position)(0x1400042a150), Empty:false, ByteOffsetStart:11, ByteOffsetEnd:22}}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -5,3 +5,17 @@
        	            	   Start: (*store.Position)(<nil>),
        	            	-  End: (*store.Position)(<nil>),
        	            	+  End: (*store.Position)({
        	            	+   state: (impl.MessageState) {
        	            	+    NoUnkeyedLiterals: (pragma.NoUnkeyedLiterals) {
        	            	+    },
        	            	+    DoNotCompare: (pragma.DoNotCompare) {
        	            	+    },
        	            	+    DoNotCopy: (pragma.DoNotCopy) {
        	            	+    },
        	            	+    atomicMessageInfo: (*impl.MessageInfo)(<nil>)
        	            	+   },
        	            	+   Line: (int32) 1,
        	            	+   Column: (int32) 0,
        	            	+   unknownFields: ([]uint8) <nil>,
        	            	+   sizeCache: (int32) 0
        	            	+  }),
        	            	   Empty: (bool) true,
        	            	@@ -14,3 +28,17 @@
        	            	   Start: (*store.Position)(<nil>),
        	            	-  End: (*store.Position)(<nil>),
        	            	+  End: (*store.Position)({
        	            	+   state: (impl.MessageState) {
        	            	+    NoUnkeyedLiterals: (pragma.NoUnkeyedLiterals) {
        	            	+    },
        	            	+    DoNotCompare: (pragma.DoNotCompare) {
        	            	+    },
        	            	+    DoNotCopy: (pragma.DoNotCopy) {
        	            	+    },
        	            	+    atomicMessageInfo: (*impl.MessageInfo)(<nil>)
        	            	+   },
        	            	+   Line: (int32) 2,
        	            	+   Column: (int32) 0,
        	            	+   unknownFields: ([]uint8) <nil>,
        	            	+   sizeCache: (int32) 0
        	            	+  }),
        	            	   Empty: (bool) false,
        	Test:       	TestSplitTiDBMultiSQL
        	Messages:   	Split comment and delimiter
--- FAIL: TestSplitTiDBMultiSQL (0.00s)
FAIL
FAIL	github.com/bytebase/bytebase/backend/plugin/parser/tokenizer	0.398s
=== RUN   TestDiagnose
=== RUN   TestDiagnose/Valid_SELECT_statement
=== RUN   TestDiagnose/Valid_CREATE_TABLE_statement
=== RUN   TestDiagnose/Missing_FROM_clause
=== RUN   TestDiagnose/Invalid_SQL_statement
=== RUN   TestDiagnose/Syntax_error
=== RUN   TestDiagnose/Empty_statement
--- PASS: TestDiagnose (0.01s)
    --- PASS: TestDiagnose/Valid_SELECT_statement (0.00s)
    --- PASS: TestDiagnose/Valid_CREATE_TABLE_statement (0.00s)
    --- PASS: TestDiagnose/Missing_FROM_clause (0.00s)
    --- PASS: TestDiagnose/Invalid_SQL_statement (0.00s)
    --- PASS: TestDiagnose/Syntax_error (0.00s)
    --- PASS: TestDiagnose/Empty_statement (0.00s)
=== RUN   TestParseSyntaxError
=== RUN   TestParseSyntaxError/Valid_statement_with_semicolon
=== RUN   TestParseSyntaxError/Valid_statement_without_semicolon
=== RUN   TestParseSyntaxError/Invalid_statement
--- PASS: TestParseSyntaxError (0.00s)
    --- PASS: TestParseSyntaxError/Valid_statement_with_semicolon (0.00s)
    --- PASS: TestParseSyntaxError/Valid_statement_without_semicolon (0.00s)
    --- PASS: TestParseSyntaxError/Invalid_statement (0.00s)
=== RUN   TestTrinoParser
--- PASS: TestTrinoParser (0.00s)
=== RUN   TestTrinoQueryType
=== RUN   TestTrinoQueryType/SELECT_*_FROM_system.runtime.nodes;
=== RUN   TestTrinoQueryType/SELECT_*_FROM_users;
=== RUN   TestTrinoQueryType/INSERT_INTO_users_(id,_name)_VALUES_(1,_'John');
=== RUN   TestTrinoQueryType/UPDATE_users_SET_name_=_'Jane'_WHERE_id_=_1;
=== RUN   TestTrinoQueryType/DELETE_FROM_users_WHERE_id_=_1;
=== RUN   TestTrinoQueryType/CREATE_TABLE_users_(id_INT,_name_VARCHAR);
=== RUN   TestTrinoQueryType/DROP_TABLE_users;
=== RUN   TestTrinoQueryType/EXPLAIN_SELECT_*_FROM_users;
=== RUN   TestTrinoQueryType/EXPLAIN_ANALYZE_SELECT_*_FROM_users;
=== RUN   TestTrinoQueryType/SHOW_TABLES;
--- PASS: TestTrinoQueryType (0.00s)
    --- PASS: TestTrinoQueryType/SELECT_*_FROM_system.runtime.nodes; (0.00s)
    --- PASS: TestTrinoQueryType/SELECT_*_FROM_users; (0.00s)
    --- PASS: TestTrinoQueryType/INSERT_INTO_users_(id,_name)_VALUES_(1,_'John'); (0.00s)
    --- PASS: TestTrinoQueryType/UPDATE_users_SET_name_=_'Jane'_WHERE_id_=_1; (0.00s)
    --- PASS: TestTrinoQueryType/DELETE_FROM_users_WHERE_id_=_1; (0.00s)
    --- PASS: TestTrinoQueryType/CREATE_TABLE_users_(id_INT,_name_VARCHAR); (0.00s)
    --- PASS: TestTrinoQueryType/DROP_TABLE_users; (0.00s)
    --- PASS: TestTrinoQueryType/EXPLAIN_SELECT_*_FROM_users; (0.00s)
    --- PASS: TestTrinoQueryType/EXPLAIN_ANALYZE_SELECT_*_FROM_users; (0.00s)
    --- PASS: TestTrinoQueryType/SHOW_TABLES; (0.00s)
=== RUN   TestGetQuerySpan
=== RUN   TestGetQuerySpan/Simple_SELECT
=== RUN   TestGetQuerySpan/SELECT_with_JOIN
=== RUN   TestGetQuerySpan/INSERT
=== RUN   TestGetQuerySpan/UPDATE
=== RUN   TestGetQuerySpan/DELETE
=== RUN   TestGetQuerySpan/CREATE_TABLE
=== RUN   TestGetQuerySpan/EXPLAIN
=== RUN   TestGetQuerySpan/EXPLAIN_ANALYZE
--- PASS: TestGetQuerySpan (0.00s)
    --- PASS: TestGetQuerySpan/Simple_SELECT (0.00s)
    --- PASS: TestGetQuerySpan/SELECT_with_JOIN (0.00s)
    --- PASS: TestGetQuerySpan/INSERT (0.00s)
    --- PASS: TestGetQuerySpan/UPDATE (0.00s)
    --- PASS: TestGetQuerySpan/DELETE (0.00s)
    --- PASS: TestGetQuerySpan/CREATE_TABLE (0.00s)
    --- PASS: TestGetQuerySpan/EXPLAIN (0.00s)
    --- PASS: TestGetQuerySpan/EXPLAIN_ANALYZE (0.00s)
=== RUN   TestDataAccessControlPatterns
=== RUN   TestDataAccessControlPatterns/Simple_WHERE_clause_predicate_extraction
=== RUN   TestDataAccessControlPatterns/JOIN_predicate_extraction
=== RUN   TestDataAccessControlPatterns/Complex_predicate_with_functions
=== RUN   TestDataAccessControlPatterns/UNION_query_predicate_extraction
=== RUN   TestDataAccessControlPatterns/Subquery_predicate_extraction
=== RUN   TestDataAccessControlPatterns/WITH_clause_predicate_extraction
=== RUN   TestDataAccessControlPatterns/Qualified_column_references_in_predicates
--- PASS: TestDataAccessControlPatterns (0.01s)
    --- PASS: TestDataAccessControlPatterns/Simple_WHERE_clause_predicate_extraction (0.00s)
    --- PASS: TestDataAccessControlPatterns/JOIN_predicate_extraction (0.00s)
    --- PASS: TestDataAccessControlPatterns/Complex_predicate_with_functions (0.00s)
    --- PASS: TestDataAccessControlPatterns/UNION_query_predicate_extraction (0.00s)
    --- PASS: TestDataAccessControlPatterns/Subquery_predicate_extraction (0.00s)
    --- PASS: TestDataAccessControlPatterns/WITH_clause_predicate_extraction (0.00s)
    --- PASS: TestDataAccessControlPatterns/Qualified_column_references_in_predicates (0.00s)
=== RUN   TestProcessPredicateJoin
=== RUN   TestProcessPredicateJoin/Manual_predicate_column_marking
=== RUN   TestProcessPredicateJoin/Process_USING_join_identifiers
--- PASS: TestProcessPredicateJoin (0.00s)
    --- PASS: TestProcessPredicateJoin/Manual_predicate_column_marking (0.00s)
    --- PASS: TestProcessPredicateJoin/Process_USING_join_identifiers (0.00s)
=== RUN   TestProcessPredicateExpressions
=== RUN   TestProcessPredicateExpressions/Text-based_predicate_extraction
--- PASS: TestProcessPredicateExpressions (0.00s)
    --- PASS: TestProcessPredicateExpressions/Text-based_predicate_extraction (0.00s)
=== RUN   TestPredicateExtraction
--- PASS: TestPredicateExtraction (0.00s)
=== RUN   TestCTEHandling
--- PASS: TestCTEHandling (0.00s)
=== RUN   TestUnnestAndLateralSupport
--- PASS: TestUnnestAndLateralSupport (0.00s)
=== RUN   TestExtractQualifiedNameParts
--- PASS: TestExtractQualifiedNameParts (0.00s)
=== RUN   TestGetQuerySpanFromYAML
--- PASS: TestGetQuerySpanFromYAML (0.00s)
=== RUN   TestValidateQuery
=== RUN   TestValidateQuery/Simple_SELECT
=== RUN   TestValidateQuery/INSERT_statement
=== RUN   TestValidateQuery/UPDATE_statement
=== RUN   TestValidateQuery/DELETE_statement
=== RUN   TestValidateQuery/CREATE_TABLE_statement
=== RUN   TestValidateQuery/EXPLAIN_statement
=== RUN   TestValidateQuery/EXPLAIN_ANALYZE_SELECT
=== RUN   TestValidateQuery/EXPLAIN_ANALYZE_UPDATE
=== RUN   TestValidateQuery/SHOW_TABLES
=== RUN   TestValidateQuery/Invalid_SQL
--- PASS: TestValidateQuery (0.00s)
    --- PASS: TestValidateQuery/Simple_SELECT (0.00s)
    --- PASS: TestValidateQuery/INSERT_statement (0.00s)
    --- PASS: TestValidateQuery/UPDATE_statement (0.00s)
    --- PASS: TestValidateQuery/DELETE_statement (0.00s)
    --- PASS: TestValidateQuery/CREATE_TABLE_statement (0.00s)
    --- PASS: TestValidateQuery/EXPLAIN_statement (0.00s)
    --- PASS: TestValidateQuery/EXPLAIN_ANALYZE_SELECT (0.00s)
    --- PASS: TestValidateQuery/EXPLAIN_ANALYZE_UPDATE (0.00s)
    --- PASS: TestValidateQuery/SHOW_TABLES (0.00s)
    --- PASS: TestValidateQuery/Invalid_SQL (0.00s)
=== RUN   TestExtractResourceList
=== RUN   TestExtractResourceList/Simple_SELECT
=== RUN   TestExtractResourceList/JOIN_query
=== RUN   TestExtractResourceList/Fully_qualified_table_names
=== RUN   TestExtractResourceList/Invalid_SQL
--- PASS: TestExtractResourceList (0.00s)
    --- PASS: TestExtractResourceList/Simple_SELECT (0.00s)
    --- PASS: TestExtractResourceList/JOIN_query (0.00s)
    --- PASS: TestExtractResourceList/Fully_qualified_table_names (0.00s)
    --- PASS: TestExtractResourceList/Invalid_SQL (0.00s)
=== RUN   TestGetStatementType
=== RUN   TestGetStatementType/SELECT_statement
=== RUN   TestGetStatementType/EXPLAIN_statement
=== RUN   TestGetStatementType/EXPLAIN_ANALYZE_statement
=== RUN   TestGetStatementType/INSERT_statement
=== RUN   TestGetStatementType/UPDATE_statement
=== RUN   TestGetStatementType/DELETE_statement
=== RUN   TestGetStatementType/CREATE_TABLE_statement
=== RUN   TestGetStatementType/CREATE_TABLE_AS_SELECT_statement
=== RUN   TestGetStatementType/CREATE_VIEW_statement
=== RUN   TestGetStatementType/ALTER_TABLE_ADD_COLUMN
=== RUN   TestGetStatementType/ALTER_TABLE_DROP_COLUMN
=== RUN   TestGetStatementType/ALTER_TABLE_RENAME_COLUMN
=== RUN   TestGetStatementType/ALTER_TABLE_SET_COLUMN_TYPE
=== RUN   TestGetStatementType/DROP_TABLE_statement
=== RUN   TestGetStatementType/DROP_VIEW_statement
=== RUN   TestGetStatementType/CREATE_SCHEMA_statement
=== RUN   TestGetStatementType/DROP_SCHEMA_statement
=== RUN   TestGetStatementType/RENAME_TABLE_statement
=== RUN   TestGetStatementType/RENAME_SCHEMA_statement
=== RUN   TestGetStatementType/SHOW_TABLES_statement
=== RUN   TestGetStatementType/SHOW_SCHEMAS_statement
=== RUN   TestGetStatementType/SHOW_COLUMNS_statement
=== RUN   TestGetStatementType/SET_SESSION_statement
--- PASS: TestGetStatementType (0.00s)
    --- PASS: TestGetStatementType/SELECT_statement (0.00s)
    --- PASS: TestGetStatementType/EXPLAIN_statement (0.00s)
    --- PASS: TestGetStatementType/EXPLAIN_ANALYZE_statement (0.00s)
    --- PASS: TestGetStatementType/INSERT_statement (0.00s)
    --- PASS: TestGetStatementType/UPDATE_statement (0.00s)
    --- PASS: TestGetStatementType/DELETE_statement (0.00s)
    --- PASS: TestGetStatementType/CREATE_TABLE_statement (0.00s)
    --- PASS: TestGetStatementType/CREATE_TABLE_AS_SELECT_statement (0.00s)
    --- PASS: TestGetStatementType/CREATE_VIEW_statement (0.00s)
    --- PASS: TestGetStatementType/ALTER_TABLE_ADD_COLUMN (0.00s)
    --- PASS: TestGetStatementType/ALTER_TABLE_DROP_COLUMN (0.00s)
    --- PASS: TestGetStatementType/ALTER_TABLE_RENAME_COLUMN (0.00s)
    --- PASS: TestGetStatementType/ALTER_TABLE_SET_COLUMN_TYPE (0.00s)
    --- PASS: TestGetStatementType/DROP_TABLE_statement (0.00s)
    --- PASS: TestGetStatementType/DROP_VIEW_statement (0.00s)
    --- PASS: TestGetStatementType/CREATE_SCHEMA_statement (0.00s)
    --- PASS: TestGetStatementType/DROP_SCHEMA_statement (0.00s)
    --- PASS: TestGetStatementType/RENAME_TABLE_statement (0.00s)
    --- PASS: TestGetStatementType/RENAME_SCHEMA_statement (0.00s)
    --- PASS: TestGetStatementType/SHOW_TABLES_statement (0.00s)
    --- PASS: TestGetStatementType/SHOW_SCHEMAS_statement (0.00s)
    --- PASS: TestGetStatementType/SHOW_COLUMNS_statement (0.00s)
    --- PASS: TestGetStatementType/SET_SESSION_statement (0.00s)
=== RUN   TestContainsSystemSchema
=== RUN   TestContainsSystemSchema/Query_with_system_schema
=== RUN   TestContainsSystemSchema/Query_with_information_schema
=== RUN   TestContainsSystemSchema/Query_with_$system
=== RUN   TestContainsSystemSchema/Query_with_catalog
=== RUN   TestContainsSystemSchema/Query_with_metadata
=== RUN   TestContainsSystemSchema/Regular_user_table
--- PASS: TestContainsSystemSchema (0.00s)
    --- PASS: TestContainsSystemSchema/Query_with_system_schema (0.00s)
    --- PASS: TestContainsSystemSchema/Query_with_information_schema (0.00s)
    --- PASS: TestContainsSystemSchema/Query_with_$system (0.00s)
    --- PASS: TestContainsSystemSchema/Query_with_catalog (0.00s)
    --- PASS: TestContainsSystemSchema/Query_with_metadata (0.00s)
    --- PASS: TestContainsSystemSchema/Regular_user_table (0.00s)
=== RUN   TestTrinoSplitMultiSQL
--- PASS: TestTrinoSplitMultiSQL (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/trino	(cached)
=== RUN   TestBackup
--- PASS: TestBackup (0.07s)
=== RUN   TestCompletion
--- PASS: TestCompletion (0.12s)
=== RUN   TestTSQLDiffer
--- PASS: TestTSQLDiffer (0.08s)
=== RUN   TestGetQuerySpan
--- PASS: TestGetQuerySpan (0.21s)
=== RUN   TestExtractMSSQLNormalizedResourceListFromSelectStatement
--- PASS: TestExtractMSSQLNormalizedResourceListFromSelectStatement (0.04s)
=== RUN   TestExtractChangedResources
--- PASS: TestExtractChangedResources (0.01s)
=== RUN   TestRestore
    restore_test.go:74: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/plugin/parser/tsql/restore_test.go:74
        	Error:      	Not equal: 
        	            	expected: "/*\nOriginal SQL:\nUPDATE t_generated SET b = 1 WHERE a = 1;\nUPDATE t_generated SET b = 2 WHERE a = 2;\nUPDATE t_generated SET b = 3 WHERE a = 3;\nUPDATE t_generated SET b = 4 WHERE a = 4;\nUPDATE t_generated SET b = 5 WHERE a = 5;\nUPDATE t_generated SET b = 6 WHERE a = 6;\nUPDATE t_generated SET b = 7 WHERE a = 7;\n*/\nMERGE INTO [db].[dbo].[t_generated] AS t\nUSING [bbarchive].[dbo].[prefix_t_generated] AS b\n  ON t.[a] = b.[a]\nWHEN MATCHED THEN\n  UPDATE SET t.[b] = b.[b]\nWHEN NOT MATCHED THEN\n INSERT ([a], [b]) VALUES (b.[a], b.[b]);"
        	            	actual  : "/*\nOriginal SQL:\n\nUPDATE t_generated SET b = 2 WHERE a = 2;\nUPDATE t_generated SET b = 3 WHERE a = 3;\nUPDATE t_generated SET b = 4 WHERE a = 4;\nUPDATE t_generated SET b = 5 WHERE a = 5;\nUPDATE t_generated SET b = 6 WHERE a = 6;\nUPDATE t_generated SET b = 7 WHERE a = 7;\n*/\nMERGE INTO [db].[dbo].[t_generated] AS t\nUSING [bbarchive].[dbo].[prefix_t_generated] AS b\n  ON t.[a] = b.[a]\nWHEN MATCHED THEN\n  UPDATE SET t.[b] = b.[b]\nWHEN NOT MATCHED THEN\n INSERT ([a], [b]) VALUES (b.[a], b.[b]);"
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -2,3 +2,3 @@
        	            	 Original SQL:
        	            	-UPDATE t_generated SET b = 1 WHERE a = 1;
        	            	+
        	            	 UPDATE t_generated SET b = 2 WHERE a = 2;
        	Test:       	TestRestore
        	Messages:   	UPDATE t_generated SET b = 1 WHERE a = 1;
        	            	UPDATE t_generated SET b = 2 WHERE a = 2;
        	            	UPDATE t_generated SET b = 3 WHERE a = 3;
        	            	UPDATE t_generated SET b = 4 WHERE a = 4;
        	            	UPDATE t_generated SET b = 5 WHERE a = 5;
        	            	UPDATE t_generated SET b = 6 WHERE a = 6;
        	            	UPDATE t_generated SET b = 7 WHERE a = 7;
--- FAIL: TestRestore (0.01s)
=== RUN   TestSplitSQL
--- PASS: TestSplitSQL (0.01s)
=== RUN   TestGetStatementType
--- PASS: TestGetStatementType (0.03s)
FAIL
FAIL	github.com/bytebase/bytebase/backend/plugin/parser/tsql	2.936s
=== RUN   TestBuildGoCommands
--- PASS: TestBuildGoCommands (0.00s)
=== RUN   TestBatch
--- PASS: TestBatch (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/tsql/batch	(cached)
=== RUN   TestParse
--- PASS: TestParse (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/parser/typeorm	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/schema	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/schema/clickhouse	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/schema/mssql	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/schema/mysql	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/schema/oracle	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/schema/pg	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/schema/redshift	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/schema/tidb	[no test files]
=== RUN   TestGetDatabaseDefinition
=== RUN   TestGetDatabaseDefinition/Simple_table
=== RUN   TestGetDatabaseDefinition/Empty_columns
=== RUN   TestGetDatabaseDefinition/Special_characters_in_identifiers
--- PASS: TestGetDatabaseDefinition (0.00s)
    --- PASS: TestGetDatabaseDefinition/Simple_table (0.00s)
    --- PASS: TestGetDatabaseDefinition/Empty_columns (0.00s)
    --- PASS: TestGetDatabaseDefinition/Special_characters_in_identifiers (0.00s)
=== RUN   TestWriteCreateTable
=== RUN   TestWriteCreateTable/Simple_table
--- PASS: TestWriteCreateTable (0.00s)
    --- PASS: TestWriteCreateTable/Simple_table (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/schema/trino	(cached)
=== RUN   TestContext_getMetaList
=== RUN   TestContext_getMetaList/task1
=== RUN   TestContext_getMetaList/task2
=== RUN   TestContext_getMetaList/task3
=== RUN   TestContext_getMetaList/task4
--- PASS: TestContext_getMetaList (0.00s)
    --- PASS: TestContext_getMetaList/task1 (0.00s)
    --- PASS: TestContext_getMetaList/task2 (0.00s)
    --- PASS: TestContext_getMetaList/task3 (0.00s)
    --- PASS: TestContext_getMetaList/task4 (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/plugin/webhook	(cached)
?   	github.com/bytebase/bytebase/backend/plugin/webhook/dingtalk	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/webhook/feishu	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/webhook/lark	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/webhook/slack	[no test files]
?   	github.com/bytebase/bytebase/backend/plugin/webhook/wecom	[no test files]
?   	github.com/bytebase/bytebase/backend/resources/postgres	[no test files]
?   	github.com/bytebase/bytebase/backend/runner/approval	[no test files]
?   	github.com/bytebase/bytebase/backend/runner/metricreport	[no test files]
?   	github.com/bytebase/bytebase/backend/runner/plancheck	[no test files]
?   	github.com/bytebase/bytebase/backend/runner/schemasync	[no test files]
?   	github.com/bytebase/bytebase/backend/runner/taskrun	[no test files]
?   	github.com/bytebase/bytebase/backend/server	[no test files]
=== RUN   TestGenerateResourceFilter
--- PASS: TestGenerateResourceFilter (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/store	(cached)
=== RUN   TestBuildTablesMetadata
--- PASS: TestBuildTablesMetadata (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/store/model	(cached)
2025/04/24 16:31:09 github.com/testcontainers/testcontainers-go - Connected to docker: 
  Server Version: 28.0.1
  API Version: 1.48
  Operating System: Docker Desktop
  Total Memory: 15973 MB
  Labels:
    com.docker.desktop.address=unix:///Users/h3n4l/Library/Containers/com.docker.docker/Data/docker-cli.sock
  Testcontainers for Go Version: v0.36.0
  Resolved Docker Host: unix:///var/run/docker.sock
  Resolved Docker Socket Path: /var/run/docker.sock
  Test SessionID: 1489900843ce4354fcdf5ce15941a9f2ee62413c75ced4559b8df0a2af356738
  Test ProcessID: 5fad592b-38cc-4ac0-a7c5-db92f93ccd08
2025/04/24 16:31:09 🐳 Creating container for image postgres:16-alpine
2025/04/24 16:31:09 🐳 Creating container for image testcontainers/ryuk:0.11.0
2025/04/24 16:31:09 ✅ Container created: 0b3e585eddf7
2025/04/24 16:31:09 🐳 Starting container: 0b3e585eddf7
2025/04/24 16:31:09 ✅ Container started: 0b3e585eddf7
2025/04/24 16:31:09 ⏳ Waiting for container id 0b3e585eddf7 image: testcontainers/ryuk:0.11.0. Waiting for: &{Port:8080/tcp timeout:<nil> PollInterval:100ms skipInternalCheck:false}
2025/04/24 16:31:09 🔔 Container is ready: 0b3e585eddf7
2025/04/24 16:31:09 ✅ Container created: 767cd2421f77
2025/04/24 16:31:09 🐳 Starting container: 767cd2421f77
2025/04/24 16:31:09 ✅ Container started: 767cd2421f77
2025/04/24 16:31:09 🔔 Container is ready: 767cd2421f77
=== RUN   TestFilterChangeHistoryByResources
=== PAUSE TestFilterChangeHistoryByResources
=== RUN   TestDataSource
2025/04/24 16:31:12 INFO -----Config BEGIN-----
2025/04/24 16:31:12 INFO mode=dev
2025/04/24 16:31:12 INFO dataDir=
2025/04/24 16:31:12 INFO demo=false
2025/04/24 16:31:12 INFO instanceRunUUID=
2025/04/24 16:31:12 INFO -----Config END-------
2025/04/24 16:31:12 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:12 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
2025/04/24 16:31:12 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:13 INFO Stopping Bytebase...
2025/04/24 16:31:13 INFO Stopping web server...
2025/04/24 16:31:13 ERROR mux server listen error error="accept tcp [::]:6810: use of closed network connection"
2025/04/24 16:31:13 ERROR http server listen error error="mux: server closed"
--- PASS: TestDataSource (0.62s)
=== RUN   TestExternalSecretManager
=== PAUSE TestExternalSecretManager
=== RUN   TestDatabaseEnvironment
2025/04/24 16:31:13 INFO -----Config BEGIN-----
2025/04/24 16:31:13 INFO mode=dev
2025/04/24 16:31:13 INFO dataDir=
2025/04/24 16:31:13 INFO demo=false
2025/04/24 16:31:13 INFO instanceRunUUID=
2025/04/24 16:31:13 INFO -----Config END-------
2025/04/24 16:31:13 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:13 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:13.534077+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:13.534102+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:13.53412+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:13.534136+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:13 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:17 INFO Stopping Bytebase...
2025/04/24 16:31:17 INFO Stopping web server...
2025/04/24 16:31:17 ERROR mux server listen error error="accept tcp [::]:6812: use of closed network connection"
2025/04/24 16:31:17 ERROR http server listen error error="mux: server closed"
--- PASS: TestDatabaseEnvironment (3.76s)
=== RUN   TestGhostSchemaUpdate
=== PAUSE TestGhostSchemaUpdate
=== RUN   TestCreateDatabaseGroup
=== PAUSE TestCreateDatabaseGroup
=== RUN   TestArchiveProject
2025/04/24 16:31:17 INFO -----Config BEGIN-----
2025/04/24 16:31:17 INFO mode=dev
2025/04/24 16:31:17 INFO dataDir=
2025/04/24 16:31:17 INFO demo=false
2025/04/24 16:31:17 INFO instanceRunUUID=
2025/04/24 16:31:17 INFO -----Config END-------
2025/04/24 16:31:17 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:17 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:17.346394+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:17.346415+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:17.346438+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:17.346449+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:17 INFO TaskSkippedOrDoneListener started
=== RUN   TestArchiveProject/ArchiveProjectWithDatbase
2025/04/24 16:31:18 ERROR unknown error method=/bytebase.v1.ProjectService/DeleteProject error="rpc error: code = FailedPrecondition desc = transfer all databases to the default project before deleting the project" latency=4ms
=== RUN   TestArchiveProject/ArchiveProjectWithOpenIssue
2025/04/24 16:31:18 ERROR unknown error method=/bytebase.v1.ProjectService/DeleteProject error="rpc error: code = FailedPrecondition desc = resolve all open issues before deleting the project" latency=3ms
2025/04/24 16:31:18 INFO Stopping Bytebase...
2025/04/24 16:31:18 INFO Stopping web server...
2025/04/24 16:31:18 ERROR mux server listen error error="accept tcp [::]:6814: use of closed network connection"
2025/04/24 16:31:18 ERROR http server listen error error="mux: server closed"
--- PASS: TestArchiveProject (1.86s)
    --- PASS: TestArchiveProject/ArchiveProjectWithDatbase (1.26s)
    --- PASS: TestArchiveProject/ArchiveProjectWithOpenIssue (0.02s)
=== RUN   TestSchemaAndDataUpdate
=== PAUSE TestSchemaAndDataUpdate
=== RUN   TestGetLatestSchema
2025/04/24 16:31:18 INFO -----Config BEGIN-----
2025/04/24 16:31:18 INFO mode=dev
2025/04/24 16:31:18 INFO dataDir=
2025/04/24 16:31:18 INFO demo=false
2025/04/24 16:31:18 INFO instanceRunUUID=
2025/04/24 16:31:18 INFO -----Config END-------
2025/04/24 16:31:19 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:19 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:19.138973+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:19.138991+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:19.139006+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:19.139034+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:19 INFO TaskSkippedOrDoneListener started
=== RUN   TestGetLatestSchema/MySQL
2025/04/24 16:31:19 🐳 Creating container for image mysql:8.0.33
2025/04/24 16:31:19 ✅ Container created: 17ac68acb0c2
2025/04/24 16:31:19 🐳 Starting container: 17ac68acb0c2
2025/04/24 16:31:19 ✅ Container started: 17ac68acb0c2
2025/04/24 16:31:19 🔔 Container is ready: 17ac68acb0c2
    schema_update_test.go:288: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/schema_update_test.go:288
        	Error:      	Received unexpected error:
        	            	port "3306/tcp" not found
        	Test:       	TestGetLatestSchema/MySQL
=== RUN   TestGetLatestSchema/PostgreSQL
2025/04/24 16:31:19 🐳 Creating container for image postgres:16-alpine
2025/04/24 16:31:19 ✅ Container created: 7c0c97f05a53
2025/04/24 16:31:19 🐳 Starting container: 7c0c97f05a53
2025/04/24 16:31:19 ✅ Container started: 7c0c97f05a53
2025/04/24 16:31:19 🔔 Container is ready: 7c0c97f05a53
    schema_update_test.go:271: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/schema_update_test.go:271
        	Error:      	Received unexpected error:
        	            	port "5432/tcp" not found
        	Test:       	TestGetLatestSchema/PostgreSQL
2025/04/24 16:31:19 INFO Stopping Bytebase...
2025/04/24 16:31:19 INFO Stopping web server...
2025/04/24 16:31:19 ERROR mux server listen error error="accept tcp [::]:6816: use of closed network connection"
2025/04/24 16:31:19 ERROR http server listen error error="mux: server closed"
--- FAIL: TestGetLatestSchema (0.76s)
    --- FAIL: TestGetLatestSchema/MySQL (0.14s)
    --- FAIL: TestGetLatestSchema/PostgreSQL (0.12s)
=== RUN   TestMarkTaskAsDone
=== PAUSE TestMarkTaskAsDone
=== RUN   TestSensitiveData
=== PAUSE TestSensitiveData
=== RUN   TestAdminQueryAffectedRows
=== PAUSE TestAdminQueryAffectedRows
=== RUN   TestSQLExport
=== PAUSE TestSQLExport
=== RUN   TestSQLReviewForPostgreSQL
=== PAUSE TestSQLReviewForPostgreSQL
=== RUN   TestSQLReviewForMySQL
=== PAUSE TestSQLReviewForMySQL
=== RUN   TestSubscription
2025/04/24 16:31:19 INFO -----Config BEGIN-----
2025/04/24 16:31:19 INFO mode=dev
2025/04/24 16:31:19 INFO dataDir=
2025/04/24 16:31:19 INFO demo=false
2025/04/24 16:31:19 INFO instanceRunUUID=
2025/04/24 16:31:19 INFO -----Config END-------
2025/04/24 16:31:19 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:20 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:20.036257+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:20.036275+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:20.036288+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:20.036301+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:20 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:20 INFO Stopping Bytebase...
2025/04/24 16:31:20 INFO Stopping web server...
2025/04/24 16:31:20 ERROR mux server listen error error="accept tcp [::]:6818: use of closed network connection"
2025/04/24 16:31:20 ERROR http server listen error error="mux: server closed"
--- PASS: TestSubscription (0.61s)
=== RUN   TestSyncSchema
=== PAUSE TestSyncSchema
=== RUN   TestSyncerForPostgreSQL
=== PAUSE TestSyncerForPostgreSQL
=== RUN   TestSyncerForMySQL
=== PAUSE TestSyncerForMySQL
=== RUN   TestDatabaseGroup
=== PAUSE TestDatabaseGroup
=== RUN   TestDeleteUser
2025/04/24 16:31:20 INFO -----Config BEGIN-----
2025/04/24 16:31:20 INFO mode=dev
2025/04/24 16:31:20 INFO dataDir=
2025/04/24 16:31:20 INFO demo=false
2025/04/24 16:31:20 INFO instanceRunUUID=
2025/04/24 16:31:20 INFO -----Config END-------
2025/04/24 16:31:20 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:20 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:20.570657+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:20.570689+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:20.570713+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:20.570733+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:20 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Stopping Bytebase...
2025/04/24 16:31:21 INFO Stopping web server...
2025/04/24 16:31:21 ERROR mux server listen error error="accept tcp [::]:6820: use of closed network connection"
2025/04/24 16:31:21 ERROR http server listen error error="mux: server closed"
--- PASS: TestDeleteUser (0.75s)
=== CONT  TestFilterChangeHistoryByResources
=== CONT  TestSQLExport
=== CONT  TestSyncerForPostgreSQL
=== CONT  TestSQLReviewForMySQL
=== CONT  TestSyncSchema
=== CONT  TestAdminQueryAffectedRows
=== CONT  TestSQLReviewForPostgreSQL
=== CONT  TestSyncerForMySQL
=== CONT  TestDatabaseGroup
=== CONT  TestSchemaAndDataUpdate
=== CONT  TestSensitiveData
=== CONT  TestGhostSchemaUpdate
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO -----Config BEGIN-----
2025/04/24 16:31:21 INFO mode=dev
2025/04/24 16:31:21 INFO dataDir=
2025/04/24 16:31:21 INFO demo=false
2025/04/24 16:31:21 INFO instanceRunUUID=
2025/04/24 16:31:21 INFO -----Config END-------
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.864553+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.864623+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.864644+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.864721+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.882477+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.882491+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.882497+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.882502+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.890783+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.890794+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.890799+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.890803+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.904991+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.905031+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.905049+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.905078+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.910804+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.910818+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.910827+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.910834+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.913819+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.913827+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.913831+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.913846+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.92019+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.920197+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.920202+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.920209+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.920898+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.920905+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.920909+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.920914+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.931224+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.931239+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.931248+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.931254+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.935747+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.935759+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.935766+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.935769+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.938609+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.938615+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.938622+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.938627+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:21 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:21.942249+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.942258+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.942267+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:21.942274+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:21 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:22 🐳 Creating container for image mysql:8.0.33
2025/04/24 16:31:22 🐳 Creating container for image mysql:8.0.33
2025/04/24 16:31:22 🐳 Creating container for image mysql:8.0.33
2025/04/24 16:31:22 🐳 Creating container for image mysql:8.0.33
2025/04/24 16:31:22 🐳 Creating container for image postgres:16-alpine
2025/04/24 16:31:22 🐳 Creating container for image postgres:16-alpine
2025/04/24 16:31:22 🐳 Creating container for image postgres:16-alpine
2025/04/24 16:31:22 🐳 Creating container for image mysql:8.0.33
2025/04/24 16:31:22 🐳 Creating container for image postgres:16-alpine
2025/04/24 16:31:22 🐳 Creating container for image mysql:8.0.33
2025/04/24 16:31:22 ✅ Container created: dab7d5f616b9
2025/04/24 16:31:22 🐳 Starting container: dab7d5f616b9
2025/04/24 16:31:22 ✅ Container created: 69303a8cc5ef
2025/04/24 16:31:22 🐳 Starting container: 69303a8cc5ef
2025/04/24 16:31:22 ✅ Container created: 3fd179de6109
2025/04/24 16:31:22 🐳 Starting container: 3fd179de6109
2025/04/24 16:31:22 ✅ Container created: b3f5d1425ddf
2025/04/24 16:31:22 🐳 Starting container: b3f5d1425ddf
2025/04/24 16:31:22 ✅ Container created: 9462d3493d82
2025/04/24 16:31:22 🐳 Starting container: 9462d3493d82
2025/04/24 16:31:22 ✅ Container created: 82401f1b28f7
2025/04/24 16:31:22 🐳 Starting container: 82401f1b28f7
2025/04/24 16:31:22 ✅ Container created: ab6659600ed7
2025/04/24 16:31:22 🐳 Starting container: ab6659600ed7
2025/04/24 16:31:22 ✅ Container created: ddd923755786
2025/04/24 16:31:22 🐳 Starting container: ddd923755786
2025/04/24 16:31:22 ✅ Container created: c7e5b215c57f
2025/04/24 16:31:22 🐳 Starting container: c7e5b215c57f
2025/04/24 16:31:22 ✅ Container created: e84c7ea5e404
2025/04/24 16:31:22 🐳 Starting container: e84c7ea5e404
2025/04/24 16:31:22 ✅ Container started: 69303a8cc5ef
2025/04/24 16:31:22 🔔 Container is ready: 69303a8cc5ef
=== NAME  TestAdminQueryAffectedRows
    sql_editor_test.go:137: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/sql_editor_test.go:137
        	Error:      	Received unexpected error:
        	            	port "3306/tcp" not found
        	Test:       	TestAdminQueryAffectedRows
2025/04/24 16:31:22 INFO Stopping Bytebase...
2025/04/24 16:31:22 INFO Stopping web server...
2025/04/24 16:31:22 ERROR mux server listen error error="accept tcp [::]:6822: use of closed network connection"
2025/04/24 16:31:22 ERROR http server listen error error="mux: server closed"
--- FAIL: TestAdminQueryAffectedRows (1.58s)
=== CONT  TestCreateDatabaseGroup
=== RUN   TestCreateDatabaseGroup/all-matched-one-instance
=== PAUSE TestCreateDatabaseGroup/all-matched-one-instance
=== RUN   TestCreateDatabaseGroup/partial-matched-one-instance
=== PAUSE TestCreateDatabaseGroup/partial-matched-one-instance
=== RUN   TestCreateDatabaseGroup/all-matched-many-instances
=== PAUSE TestCreateDatabaseGroup/all-matched-many-instances
=== RUN   TestCreateDatabaseGroup/partial-matched-many-instances
=== PAUSE TestCreateDatabaseGroup/partial-matched-many-instances
=== CONT  TestMarkTaskAsDone
2025/04/24 16:31:22 ✅ Container started: 3fd179de6109
2025/04/24 16:31:22 🔔 Container is ready: 3fd179de6109
=== NAME  TestSensitiveData
    sensitive_data_test.go:134: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/sensitive_data_test.go:134
        	Error:      	Received unexpected error:
        	            	port "3306/tcp" not found
        	Test:       	TestSensitiveData
2025/04/24 16:31:22 INFO Stopping Bytebase...
2025/04/24 16:31:22 INFO Stopping web server...
2025/04/24 16:31:22 ERROR mux server listen error error="accept tcp [::]:6832: use of closed network connection"
2025/04/24 16:31:22 ERROR http server listen error error="mux: server closed"
--- FAIL: TestSensitiveData (1.62s)
=== CONT  TestExternalSecretManager
2025/04/24 16:31:22 ✅ Container started: dab7d5f616b9
2025/04/24 16:31:22 🔔 Container is ready: dab7d5f616b9
2025/04/24 16:31:22 ✅ Container started: 9462d3493d82
=== NAME  TestSQLReviewForMySQL
    sql_review_test.go:261: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/sql_review_test.go:261
        	Error:      	Received unexpected error:
        	            	port "3306/tcp" not found
        	Test:       	TestSQLReviewForMySQL
2025/04/24 16:31:22 INFO Stopping Bytebase...
2025/04/24 16:31:22 INFO Stopping web server...
2025/04/24 16:31:22 ERROR mux server listen error error="accept tcp [::]:6830: use of closed network connection"
2025/04/24 16:31:22 ERROR http server listen error error="mux: server closed"
--- FAIL: TestSQLReviewForMySQL (1.63s)
=== CONT  TestCreateDatabaseGroup/all-matched-one-instance
2025/04/24 16:31:22 🔔 Container is ready: 9462d3493d82
2025/04/24 16:31:22 ✅ Container started: b3f5d1425ddf
=== NAME  TestSyncerForPostgreSQL
    syncer_test.go:189: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/syncer_test.go:189
        	Error:      	Received unexpected error:
        	            	port "5432/tcp" not found
        	Test:       	TestSyncerForPostgreSQL
2025/04/24 16:31:22 INFO Stopping Bytebase...
2025/04/24 16:31:22 INFO Stopping web server...
2025/04/24 16:31:22 ERROR mux server listen error error="accept tcp [::]:6844: use of closed network connection"
2025/04/24 16:31:22 ERROR http server listen error error="mux: server closed"
2025/04/24 16:31:22 🔔 Container is ready: b3f5d1425ddf
--- FAIL: TestSyncerForPostgreSQL (1.63s)
=== CONT  TestCreateDatabaseGroup/all-matched-many-instances
=== NAME  TestSyncerForMySQL
    syncer_test.go:468: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/syncer_test.go:468
        	Error:      	Received unexpected error:
        	            	port "3306/tcp" not found
        	Test:       	TestSyncerForMySQL
2025/04/24 16:31:22 INFO Stopping Bytebase...
2025/04/24 16:31:22 INFO Stopping web server...
2025/04/24 16:31:22 ERROR mux server listen error error="accept tcp [::]:6824: use of closed network connection"
2025/04/24 16:31:22 ERROR http server listen error error="mux: server closed"
--- FAIL: TestSyncerForMySQL (1.63s)
=== CONT  TestCreateDatabaseGroup/partial-matched-many-instances
2025/04/24 16:31:22 INFO -----Config BEGIN-----
2025/04/24 16:31:22 INFO mode=dev
2025/04/24 16:31:22 INFO dataDir=
2025/04/24 16:31:22 INFO demo=false
2025/04/24 16:31:22 INFO instanceRunUUID=
2025/04/24 16:31:22 INFO -----Config END-------
2025/04/24 16:31:22 ✅ Container started: ab6659600ed7
2025/04/24 16:31:22 🔔 Container is ready: ab6659600ed7
=== NAME  TestSQLReviewForPostgreSQL
    sql_review_test.go:91: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/sql_review_test.go:91
        	Error:      	Received unexpected error:
        	            	port "5432/tcp" not found
        	Test:       	TestSQLReviewForPostgreSQL
2025/04/24 16:31:22 INFO Stopping Bytebase...
2025/04/24 16:31:22 INFO Stopping web server...
2025/04/24 16:31:22 ERROR mux server listen error error="accept tcp [::]:6836: use of closed network connection"
2025/04/24 16:31:22 ERROR http server listen error error="mux: server closed"
--- FAIL: TestSQLReviewForPostgreSQL (1.68s)
=== CONT  TestCreateDatabaseGroup/partial-matched-one-instance
2025/04/24 16:31:22 ✅ Container started: 82401f1b28f7
2025/04/24 16:31:22 🔔 Container is ready: 82401f1b28f7
=== NAME  TestFilterChangeHistoryByResources
    change_history_test.go:64: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/change_history_test.go:64
        	Error:      	Received unexpected error:
        	            	port "5432/tcp" not found
        	Test:       	TestFilterChangeHistoryByResources
2025/04/24 16:31:22 INFO Stopping Bytebase...
2025/04/24 16:31:22 INFO Stopping web server...
2025/04/24 16:31:22 ERROR mux server listen error error="accept tcp [::]:6828: use of closed network connection"
2025/04/24 16:31:22 ERROR http server listen error error="mux: server closed"
--- FAIL: TestFilterChangeHistoryByResources (1.69s)
2025/04/24 16:31:22 ✅ Container started: ddd923755786
2025/04/24 16:31:22 🔔 Container is ready: ddd923755786
=== NAME  TestSQLExport
    sql_export_test.go:124: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/sql_export_test.go:124
        	Error:      	Received unexpected error:
        	            	port "3306/tcp" not found
        	Test:       	TestSQLExport
2025/04/24 16:31:22 INFO Stopping Bytebase...
2025/04/24 16:31:22 INFO Stopping web server...
2025/04/24 16:31:22 ERROR mux server listen error error="accept tcp [::]:6826: use of closed network connection"
2025/04/24 16:31:22 ERROR http server listen error error="mux: server closed"
--- FAIL: TestSQLExport (1.70s)
2025/04/24 16:31:22 ✅ Container started: e84c7ea5e404
2025/04/24 16:31:22 🔔 Container is ready: e84c7ea5e404
=== NAME  TestGhostSchemaUpdate
    ghost_test.go:50: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/ghost_test.go:50
        	Error:      	Received unexpected error:
        	            	port "3306/tcp" not found
        	Test:       	TestGhostSchemaUpdate
2025/04/24 16:31:22 INFO Stopping Bytebase...
2025/04/24 16:31:22 INFO Stopping web server...
2025/04/24 16:31:22 ERROR mux server listen error error="accept tcp [::]:6834: use of closed network connection"
2025/04/24 16:31:22 ERROR http server listen error error="mux: server closed"
--- FAIL: TestGhostSchemaUpdate (1.72s)
2025/04/24 16:31:22 ✅ Container started: c7e5b215c57f
2025/04/24 16:31:22 🔔 Container is ready: c7e5b215c57f
=== NAME  TestSyncSchema
    sync_schema_test.go:49: 
        	Error Trace:	/Users/h3n4l/OpenSource/bytebase/backend/tests/sync_schema_test.go:49
        	Error:      	Received unexpected error:
        	            	port "5432/tcp" not found
        	Test:       	TestSyncSchema
2025/04/24 16:31:22 INFO Stopping Bytebase...
2025/04/24 16:31:22 INFO Stopping web server...
2025/04/24 16:31:22 ERROR mux server listen error error="accept tcp [::]:6842: use of closed network connection"
2025/04/24 16:31:22 ERROR http server listen error error="mux: server closed"
--- FAIL: TestSyncSchema (1.73s)
2025/04/24 16:31:23 INFO -----Config BEGIN-----
2025/04/24 16:31:23 INFO mode=dev
2025/04/24 16:31:23 INFO dataDir=
2025/04/24 16:31:23 INFO demo=false
2025/04/24 16:31:23 INFO instanceRunUUID=
2025/04/24 16:31:23 INFO -----Config END-------
2025/04/24 16:31:23 INFO -----Config BEGIN-----
2025/04/24 16:31:23 INFO mode=dev
2025/04/24 16:31:23 INFO dataDir=
2025/04/24 16:31:23 INFO demo=false
2025/04/24 16:31:23 INFO instanceRunUUID=
2025/04/24 16:31:23 INFO -----Config END-------
2025/04/24 16:31:23 INFO -----Config BEGIN-----
2025/04/24 16:31:23 INFO mode=dev
2025/04/24 16:31:23 INFO dataDir=
2025/04/24 16:31:23 INFO demo=false
2025/04/24 16:31:23 INFO instanceRunUUID=
2025/04/24 16:31:23 INFO -----Config END-------
2025/04/24 16:31:23 INFO -----Config BEGIN-----
2025/04/24 16:31:23 INFO mode=dev
2025/04/24 16:31:23 INFO dataDir=
2025/04/24 16:31:23 INFO demo=false
2025/04/24 16:31:23 INFO instanceRunUUID=
2025/04/24 16:31:23 INFO -----Config END-------
2025/04/24 16:31:23 INFO -----Config BEGIN-----
2025/04/24 16:31:23 INFO mode=dev
2025/04/24 16:31:23 INFO dataDir=
2025/04/24 16:31:23 INFO demo=false
2025/04/24 16:31:23 INFO instanceRunUUID=
2025/04/24 16:31:23 INFO -----Config END-------
2025/04/24 16:31:24 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:24 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:24 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:24.675039+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.675057+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.675072+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.675087+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:24 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:24 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:24.690771+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.690792+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.690808+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.690822+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:24 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:24 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:24 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:24 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:24 INFO Initialized database schema with version 3.6.4.
2025/04/24 16:31:24 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:24.831793+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.831809+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.831821+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.831829+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:24 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:24.832511+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.832522+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.832531+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.832539+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:24 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:24 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:24 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:24.866497+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.866507+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.866512+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.866516+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:24 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:24 INFO Skip embedding frontend, build with 'embed_frontend' tag if you want embedded frontend.
{"time":"2025-04-24T16:31:24.879597+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"requests_total could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.879607+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_duration_seconds could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.879618+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"response_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
{"time":"2025-04-24T16:31:24.879627+08:00","level":"ERROR","prefix":"-","file":"prometheus.go","line":"388","message":"request_size_bytes could not be registered in Prometheus: duplicate metrics collector registration attempted"}
2025/04/24 16:31:24 INFO TaskSkippedOrDoneListener started
2025/04/24 16:31:25 🐳 Creating container for image postgres:16-alpine
2025/04/24 16:31:25 ✅ Container created: a4d992c8cff4
2025/04/24 16:31:25 🐳 Starting container: a4d992c8cff4
2025/04/24 16:31:25 ✅ Container started: a4d992c8cff4
2025/04/24 16:31:25 🔔 Container is ready: a4d992c8cff4
2025/04/24 16:31:26 INFO Stopping Bytebase...
2025/04/24 16:31:26 INFO Stopping web server...
2025/04/24 16:31:26 ERROR mux server listen error error="accept tcp [::]:6840: use of closed network connection"
2025/04/24 16:31:26 ERROR http server listen error error="mux: server closed"
--- PASS: TestSchemaAndDataUpdate (5.41s)
2025/04/24 16:31:27 INFO Stopping Bytebase...
2025/04/24 16:31:27 INFO Stopping web server...
2025/04/24 16:31:27 ERROR mux server listen error error="accept tcp [::]:6846: use of closed network connection"
2025/04/24 16:31:27 ERROR http server listen error error="mux: server closed"
--- PASS: TestMarkTaskAsDone (4.60s)
2025/04/24 16:31:27 INFO Stopping Bytebase...
2025/04/24 16:31:27 INFO Stopping web server...
2025/04/24 16:31:27 ERROR mux server listen error error="accept tcp [::]:6852: use of closed network connection"
2025/04/24 16:31:27 ERROR http server listen error error="mux: server closed"
2025/04/24 16:31:28 INFO Stopping Bytebase...
2025/04/24 16:31:28 INFO Stopping web server...
2025/04/24 16:31:28 ERROR mux server listen error error="accept tcp [::]:6838: use of closed network connection"
2025/04/24 16:31:28 ERROR http server listen error error="mux: server closed"
--- PASS: TestDatabaseGroup (7.06s)
{"time":"2025-04-24T16:31:28.392501+08:00","id":"","remote_ip":"::1","host":"localhost:6858","method":"GET","uri":"/secrets/hello-secret-id:access","user_agent":"Go-http-client/1.1","status":200,"error":"","latency":2625,"latency_human":"2.625µs","bytes_in":0,"bytes_out":53}
2025/04/24 16:31:29 🐳 Stopping container: a4d992c8cff4
2025/04/24 16:31:29 ✅ Container stopped: a4d992c8cff4
2025/04/24 16:31:29 🐳 Terminating container: a4d992c8cff4
2025/04/24 16:31:29 🚫 Container terminated: a4d992c8cff4
2025/04/24 16:31:29 INFO Stopping Bytebase...
2025/04/24 16:31:29 INFO Stopping web server...
2025/04/24 16:31:29 ERROR mux server listen error error="accept tcp [::]:6848: use of closed network connection"
2025/04/24 16:31:29 ERROR http server listen error error="mux: server closed"
--- PASS: TestExternalSecretManager (6.64s)
2025/04/24 16:31:29 INFO Stopping Bytebase...
2025/04/24 16:31:29 INFO Stopping web server...
2025/04/24 16:31:29 ERROR mux server listen error error="accept tcp [::]:6856: use of closed network connection"
2025/04/24 16:31:29 ERROR http server listen error error="mux: server closed"
2025/04/24 16:31:30 INFO Stopping Bytebase...
2025/04/24 16:31:30 INFO Stopping web server...
2025/04/24 16:31:30 ERROR mux server listen error error="accept tcp [::]:6854: use of closed network connection"
2025/04/24 16:31:30 ERROR http server listen error error="mux: server closed"
2025/04/24 16:31:34 INFO Stopping Bytebase...
2025/04/24 16:31:34 INFO Stopping web server...
2025/04/24 16:31:34 ERROR mux server listen error error="accept tcp [::]:6850: use of closed network connection"
2025/04/24 16:31:34 ERROR http server listen error error="mux: server closed"
--- PASS: TestCreateDatabaseGroup (0.00s)
    --- PASS: TestCreateDatabaseGroup/all-matched-one-instance (4.75s)
    --- PASS: TestCreateDatabaseGroup/partial-matched-one-instance (6.67s)
    --- PASS: TestCreateDatabaseGroup/all-matched-many-instances (7.70s)
    --- PASS: TestCreateDatabaseGroup/partial-matched-many-instances (11.76s)
FAIL
2025/04/24 16:31:34 🐳 Stopping container: 767cd2421f77
2025/04/24 16:31:34 ✅ Container stopped: 767cd2421f77
2025/04/24 16:31:34 🐳 Terminating container: 767cd2421f77
2025/04/24 16:31:34 🚫 Container terminated: 767cd2421f77
FAIL	github.com/bytebase/bytebase/backend/tests	29.827s
?   	github.com/bytebase/bytebase/backend/tests/fake	[no test files]
=== RUN   TestGetRenderedStatement
--- PASS: TestGetRenderedStatement (0.00s)
=== RUN   TestCheckDatabaseGroupMatch
--- PASS: TestCheckDatabaseGroupMatch (0.00s)
PASS
ok  	github.com/bytebase/bytebase/backend/utils	(cached)
?   	github.com/bytebase/bytebase/proto/generated-go/store	[no test files]
?   	github.com/bytebase/bytebase/proto/generated-go/v1	[no test files]
=== RUN   TestValidateLinks
<?xml version="1.0" encoding="UTF-8"?>
<sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
<sitemap><loc>https://www.bytebase.com/sitemap-0.xml</loc></sitemap>
<sitemap><loc>https://www.bytebase.com/sitemap-1.xml</loc></sitemap>
</sitemapindex>
--- PASS: TestValidateLinks (5.56s)
PASS
ok  	github.com/bytebase/bytebase/scripts	(cached)
FAIL
